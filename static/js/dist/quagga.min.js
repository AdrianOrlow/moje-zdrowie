!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(t.toString()).default:"object"==typeof exports?exports.Quagga=t(t.toString()).default:e.Quagga=t(t.toString()).default}(this,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].e;var o=t[r]={e:{},i:r,l:!1};return e[r].call(o.e,o,o.e,n),o.l=!0,o.e}return n.m=e,n.c=t,n.p="/",n(n.s=214)}([function(e,t,n){var r=Array.isArray;e.e=r},function(e,t,n){"use strict";var r=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};e.e={log:o.log,disableLog:o.disableLog,browserDetails:o.detectBrowser(),extractVersion:o.extractVersion}},function(e,t,n){e.e=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(63),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.e=i},function(e,t,n){var r=n(15),o=r&&r.__esModule?function(){return r.default}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(7),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e,t){var n;e=o.a.bind()((n={},Object.keys(c.CONFIG_KEYS).forEach(function(e){n[e]=c.CONFIG_KEYS[e].default}),n),e),i.a.call(this,e,t)}c.prototype=Object.create(i.a.prototype,{CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},FORMAT:{value:"ean_13",writeable:!1}}),c.prototype.constructor=c,c.prototype._decodeCode=function(e,t){var n,r,o,i=[0,0,0,0],a=this,c=e,s=!a._row[c],u=0,f={error:Number.MAX_VALUE,code:-1,start:e,end:e};for(t||(t=a.CODE_PATTERN.length),n=c;n<a._row.length;n++)if(a._row[n]^s)i[u]++;else{if(u===i.length-1){for(r=0;r<t;r++)(o=a._matchPattern(i,a.CODE_PATTERN[r]))<f.error&&(f.code=r,f.error=o);return f.end=n,f.error>a.AVG_CODE_ERROR?null:f}i[++u]=1,s=!s}return null},c.prototype._findPattern=function(e,t,n,r,o){var i,a,c,s,u=[],f=this,d=0,l={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t||(t=f._nextSet(f._row)),void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=f.AVG_CODE_ERROR),i=0;i<e.length;i++)u[i]=0;for(i=t;i<f._row.length;i++)if(f._row[i]^n)u[d]++;else{if(d===u.length-1){for(s=0,c=0;c<u.length;c++)s+=u[c];if((a=f._matchPattern(u,e))<o)return l.error=a,l.start=i-s,l.end=i,l;if(!r)return null;for(c=0;c<u.length-2;c++)u[c]=u[c+2];u[u.length-2]=0,u[u.length-1]=0,d--}else d++;u[d]=1,n=!n}return null},c.prototype._findStart=function(){for(var e,t,n=this,r=n._nextSet(n._row);!t;){if(!(t=n._findPattern(n.START_PATTERN,r)))return null;if((e=t.start-(t.end-t.start))>=0&&n._matchRange(e,t.start,0))return t;r=t.end,t=null}},c.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start))<this._row.length&&this._matchRange(e.end,t,0)?e:null},c.prototype._findEnd=function(e,t){var n=this._findPattern(this.STOP_PATTERN,e,t,!1);return null!==n?this._verifyTrailingWhitespace(n):null},c.prototype._calculateFirstDigit=function(e){var t;for(t=0;t<this.CODE_FREQUENCY.length;t++)if(e===this.CODE_FREQUENCY[t])return t;return null},c.prototype._decodePayload=function(e,t,n){var r,o,i=this,a=0;for(r=0;r<6;r++){if(!(e=i._decodeCode(e.end)))return null;e.code>=i.CODE_G_START?(e.code=e.code-i.CODE_G_START,a|=1<<5-r):a|=0<<5-r,t.push(e.code),n.push(e)}if(null===(o=i._calculateFirstDigit(a)))return null;if(t.unshift(o),null===(e=i._findPattern(i.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<6;r++){if(!(e=i._decodeCode(e.end,i.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},c.prototype._decode=function(){var e,t,n=this,r=[],o=[],i={};if(!(e=n._findStart()))return null;if(t={code:e.code,start:e.start,end:e.end},o.push(t),!(t=n._decodePayload(t,r,o)))return null;if(!(t=n._findEnd(t.end,!1)))return null;if(o.push(t),!n._checksum(r))return null;if(this.supplements.length>0){var c=this._decodeExtensions(t.end);if(!c)return null;var s=c.decodedCodes[c.decodedCodes.length-1],u={start:s.start+((s.end-s.start)/2|0),end:s.end};if(!n._verifyTrailingWhitespace(u))return null;i={supplement:c,code:r.join("")+c.code}}return a({code:r.join(""),start:e.start,end:t.end,codeset:"",startInfo:e,decodedCodes:o},i)},c.prototype._decodeExtensions=function(e){var t,n,r=this._nextSet(this._row,e),o=this._findPattern(this.EXTENSION_START_PATTERN,r,!1,!1);if(null===o)return null;for(t=0;t<this.supplements.length;t++)if(null!==(n=this.supplements[t].decode(this._row,o.end)))return{code:n.code,start:r,startInfo:o,end:n.end,codeset:"",decodedCodes:n.decodedCodes};return null},c.prototype._checksum=function(e){var t,n=0;for(t=e.length-2;t>=0;t-=2)n+=e[t];for(n*=3,t=e.length-1;t>=0;t-=2)n+=e[t];return n%10==0},c.CONFIG_KEYS={supplements:{type:"arrayOf(string)",default:[],description:"Allowed extensions to be decoded (2 and/or 5)"}},t.a=c},function(e,t,n){var r=n(129),o=n(158);e.e=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){t.a={drawRect:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=1,n.beginPath(),n.strokeRect(e.x,e.y,t.x,t.y)},drawPath:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=r.lineWidth,n.beginPath(),n.moveTo(e[0][t.x],e[0][t.y]);for(var o=1;o<e.length;o++)n.lineTo(e[o][t.x],e[o][t.y]);n.closePath(),n.stroke()},drawImage:function(e,t,n){var r,o=n.getImageData(0,0,t.x,t.y),i=o.data,a=e.length,c=i.length;if(c/a!=4)return!1;for(;a--;)r=e[a],i[--c]=255,i[--c]=r,i[--c]=r,i[--c]=r;return n.putImageData(o,0,0),!0}}},function(e,t,n){function r(e,t){return this._row=[],this.config=e||{},this.supplements=t,this}r.prototype._nextUnset=function(e,t){var n;for(void 0===t&&(t=0),n=t;n<e.length;n++)if(!e[n])return n;return e.length},r.prototype._matchPattern=function(e,t,n){var r,o,i,a,c=0,s=0,u=0,f=0;for(n=n||this.SINGLE_CODE_ERROR||1,r=0;r<e.length;r++)u+=e[r],f+=t[r];if(u<f)return Number.MAX_VALUE;for(n*=o=u/f,r=0;r<e.length;r++){if(i=e[r],a=t[r]*o,(s=Math.abs(i-a)/a)>n)return Number.MAX_VALUE;c+=s}return c/f},r.prototype._nextSet=function(e,t){var n;for(n=t=t||0;n<e.length;n++)if(e[n])return n;return e.length},r.prototype._correctBars=function(e,t,n){for(var r=n.length,o=0;r--;)(o=e[n[r]]*(1-(1-t)/2))>1&&(e[n[r]]=o)},r.prototype._matchTrace=function(e,t){var n,r=[],o=this,i=o._nextSet(o._row),a=!o._row[i],c=0,s={error:Number.MAX_VALUE,code:-1,start:0};if(e){for(n=0;n<e.length;n++)r.push(0);for(n=i;n<o._row.length;n++)if(o._row[n]^a)r[c]++;else{if(c===r.length-1)return o._matchPattern(r,e)<t?(s.start=n-i,s.end=n,s.counter=r,s):null;r[++c]=1,a=!a}}else for(r.push(0),n=i;n<o._row.length;n++)o._row[n]^a?r[c]++:(c++,r.push(0),r[c]=1,a=!a);return s.start=i,s.end=o._row.length-1,s.counter=r,s},r.prototype.decodePattern=function(e){var t,n=this;return n._row=e,null===(t=n._decode())?(n._row.reverse(),(t=n._decode())&&(t.direction=r.DIRECTION.REVERSE,t.start=n._row.length-t.start,t.end=n._row.length-t.end)):t.direction=r.DIRECTION.FORWARD,t&&(t.format=n.FORMAT),t},r.prototype._matchRange=function(e,t,n){var r;for(r=e=e<0?0:e;r<t;r++)if(this._row[r]!==n)return!1;return!0},r.prototype._fillCounters=function(e,t,n){var r,o=0,i=[];for(n=void 0===n||n,e=void 0!==e?e:this._nextUnset(this._row),t=t||this._row.length,i[o]=0,r=e;r<t;r++)this._row[r]^n?i[o]++:(i[++o]=1,n=!n);return i},Object.defineProperty(r.prototype,"FORMAT",{value:"unknown",writeable:!1}),r.DIRECTION={FORWARD:1,REVERSE:-1},r.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},r.CONFIG_KEYS={},t.a=r},function(e,t,n){e.e=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},function(e,t,n){var r=n(40),o=1/0;e.e=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t,n){e.e=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(70),o="[object Arguments]",i=Object.prototype,a=i.hasOwnProperty,c=i.toString,s=i.propertyIsEnumerable;e.e=function(e){return r(e)&&a.call(e,"callee")&&(!s.call(e,"callee")||c.call(e)==o)}},function(e,t,n){var r=n(38),o=n(39);e.e=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){e.e=function(e){return!!e&&"object"==typeof e}},function(e,t,n){var r=n(49),o=n(131),i=n(12);e.e=function(e){return i(e)?r(e):o(e)}},function(e,t,n){var r=n(134),o=n(151)(function(e,t,n){r(e,t,n)});e.e=o},function(e,t,n){t.a={init:function(e,t){for(var n=e.length;n--;)e[n]=t},shuffle:function(e){for(var t,n,r=e.length-1;r>=0;r--)t=Math.floor(Math.random()*r),n=e[r],e[r]=e[t],e[t]=n;return e},toPointList:function(e){var t,n,r=[],o=[];for(t=0;t<e.length;t++){for(r=[],n=0;n<e[t].length;n++)r[n]=e[t][n];o[t]="["+r.join(",")+"]"}return"["+o.join(",\r\n")+"]"},threshold:function(e,t,n){var r,o=[];for(r=0;r<e.length;r++)n.apply(e,[e[r]])>=t&&o.push(e[r]);return o},maxIndex:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>e[n]&&(n=t);return n},max:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>n&&(n=e[t]);return n},sum:function(e){for(var t=e.length,n=0;t--;)n+=e[t];return n}}},function(e,t,n){var r=n(172),o=n(173),i=n(174),a=n(175),c=n(176);function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.e=s},function(e,t,n){var r=n(17),o=n(186),i=n(187),a=n(188),c=n(189),s=n(190);function u(e){this.__data__=new r(e)}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=c,u.prototype.set=s,e.e=u},function(e,t,n){var r=n(3).Symbol;e.e=r},function(e,t,n){var r=n(10);e.e=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(170);e.e=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){e.e=function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}},function(e,t,n){var r=n(0),o=n(40),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.e=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=Object.prototype;e.e=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){var r=n(5)(Object,"create");e.e=r},function(e,t,n){var r=n(77),o=n(16);t.f=function(e,t){return{x:e,y:t,toVec2:function(){return i.clone([this.x,this.y])},toVec3:function(){return a.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}},t.c=function(e,t){var n=function(e,t){t||(t=8);var n,r=8-t;function i(e,t){var r,o=0;for(r=e;r<=t;r++)o+=n[r];return o}function a(e,t){var r,o=0;for(r=e;r<=t;r++)o+=r*n[r];return o}return function(){var r,c,s,u,f,d,l,p=[0],h=(1<<t)-1;for(n=function(e,t){t||(t=8);for(var n=e.data,r=n.length,o=8-t,i=new Int32Array(1<<t);r--;)i[n[r]>>o]++;return i}(e,t),u=1;u<h;u++)r=i(0,u),c=i(u+1,h),0==(s=r*c)&&(s=1),f=a(0,u)*c,d=a(u+1,h)*r,l=f-d,p[u]=l*l/s;return o.a.maxIndex(p)}()<<r}(e);return function(e,t,n){n||(n=e);for(var r=e.data,o=r.length,i=n.data;o--;)i[o]=r[o]<t?1:0}(e,n,t),n},t.d=function(e,t,n){var o,i,a,c,s=[];n||(n="rad");function u(e){var t=!1;for(i=0;i<s.length;i++)(a=s[i]).fits(e)&&(a.add(e),t=!0);return t}for(o=0;o<e.length;o++)u(c=r.a.createPoint(e[o],o,n))||s.push(r.a.create(c,t));return s},t.e=function(e,t,n){var r,o,i,a,c=0,s=0,u=[];for(r=0;r<t;r++)u[r]={score:0,item:null};for(r=0;r<e.length;r++)if((o=n.apply(this,[e[r]]))>s)for((i=u[c]).score=o,i.item=e[r],s=Number.MAX_VALUE,a=0;a<t;a++)u[a].score<s&&(s=u[a].score,c=a);return u},t.i=function(e,t,n){var r,o=0,i=t.x,a=Math.floor(e.length/4),c=t.x/2,s=0,u=t.x;for(;i<a;){for(r=0;r<c;r++)n[s]=Math.floor((.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2]+(.299*e[4*(o+1)+0]+.587*e[4*(o+1)+1]+.114*e[4*(o+1)+2])+(.299*e[4*i+0]+.587*e[4*i+1]+.114*e[4*i+2])+(.299*e[4*(i+1)+0]+.587*e[4*(i+1)+1]+.114*e[4*(i+1)+2]))/4),s++,o+=2,i+=2;o+=u,i+=u}},t.j=c,t.g=function(e,t){var n=e.data,r=e.size.x,o=t.data,i=0,a=r,c=n.length,s=r/2,u=0;for(;a<c;){for(var f=0;f<s;f++)o[u]=Math.floor((n[i]+n[i+1]+n[a]+n[a+1])/4),u++,i+=2,a+=2;i+=r,a+=r}},t.a=function(e,t){var n=e[0],r=e[1],o=e[2],i=o*r,a=i*(1-Math.abs(n/60%2-1)),c=o-i,s=0,u=0,f=0;t=t||[0,0,0],n<60?(s=i,u=a):n<120?(s=a,u=i):n<180?(u=i,f=a):n<240?(u=a,f=i):n<300?(s=a,f=i):n<360&&(s=i,f=a);return t[0]=255*(s+c)|0,t[1]=255*(u+c)|0,t[2]=255*(f+c)|0,t},t.b=function(e,t){var n,r=s(t.x),o=s(t.y),i=Math.max(t.x,t.y),a=function(e,t){var n=0,r=0,o=[];for(;n<e.length&&r<t.length;)e[n]===t[r]?(o.push(e[n]),n++,r++):e[n]>t[r]?r++:n++;return o}(r,o),c=[8,10,15,20,32,60,80],u={"x-small":5,small:4,medium:3,large:2,"x-large":1},f=u[e]||u.medium,d=c[f],l=Math.floor(i/d);function p(e){for(var t=0,n=e[Math.floor(e.length/2)];t<e.length-1&&e[t]<l;)t++;return t>0&&(n=Math.abs(e[t]-l)>Math.abs(e[t-1]-l)?e[t-1]:e[t]),l/n<c[f+1]/c[f]&&l/n>c[f-1]/c[f]?{x:n,y:n}:null}(n=p(a))||(n=p(s(i)))||(n=p(s(l*d)));return n},t.h=function(e,t,n){var r={width:e,height:t},o=Object.keys(n).reduce(function(e,t){var o,i=n[t],a=(o=i,{value:parseFloat(o),unit:(o.indexOf("%"),o.length,"%")}),c=u[t](a,r);return e[t]=c,e},{});return{sx:o.left,sy:o.top,sw:o.right-o.left,sh:o.bottom-o.top}};var i={clone:n(8)},a={clone:n(109)};function c(e,t,n){var r,o=e.length/4|0;if(n&&!0===n.singleChannel)for(r=0;r<o;r++)t[r]=e[4*r+0];else for(r=0;r<o;r++)t[r]=Math.floor(.299*e[4*r+0]+.587*e[4*r+1]+.114*e[4*r+2])}function s(e){var t,n=[],r=[];for(t=1;t<Math.sqrt(e)+1;t++)e%t==0&&(r.push(t),t!==e/t&&n.unshift(Math.floor(e/t)));return r.concat(n)}var u={top:function(e,t){if("%"===e.unit)return Math.floor(t.height*(e.value/100))},right:function(e,t){if("%"===e.unit)return Math.floor(t.width-t.width*(e.value/100))},bottom:function(e,t){if("%"===e.unit)return Math.floor(t.height-t.height*(e.value/100))},left:function(e,t){if("%"===e.unit)return Math.floor(t.width*(e.value/100))}}},function(e,t,n){var r=n(80),o=n(26),i=n(16),a={clone:n(8)};function c(e,t,n,r){t?this.data=t:n?(this.data=new n(e.x*e.y),n===Array&&r&&i.a.init(this.data,0)):(this.data=new Uint8Array(e.x*e.y),Uint8Array===Array&&r&&i.a.init(this.data,0)),this.size=e}c.prototype.inImageWithBorder=function(e,t){return e.x>=t&&e.y>=t&&e.x<this.size.x-t&&e.y<this.size.y-t},c.sample=function(e,t,n){var r=Math.floor(t),o=Math.floor(n),i=e.size.x,a=o*e.size.x+r,c=e.data[a+0],s=e.data[a+1],u=e.data[a+i],f=e.data[a+i+1],d=c-s;return t-=r,n-=o,Math.floor(t*(n*(d-u+f)-d)+n*(u-c)+c)},c.clearArray=function(e){for(var t=e.length;t--;)e[t]=0},c.prototype.subImage=function(e,t){return new r.a(e,t,this)},c.prototype.subImageAsCopy=function(e,t){var n,r,o=e.size.y,i=e.size.x;for(n=0;n<i;n++)for(r=0;r<o;r++)e.data[r*i+n]=this.data[(t.y+r)*this.size.x+t.x+n]},c.prototype.copyTo=function(e){for(var t=this.data.length,n=this.data,r=e.data;t--;)r[t]=n[t]},c.prototype.get=function(e,t){return this.data[t*this.size.x+e]},c.prototype.getSafe=function(e,t){var n;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},n=0;n<this.size.x;n++)this.indexMapping.x[n]=n,this.indexMapping.x[n+this.size.x]=n;for(n=0;n<this.size.y;n++)this.indexMapping.y[n]=n,this.indexMapping.y[n+this.size.y]=n}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[e+this.size.x]]},c.prototype.set=function(e,t,n){return this.data[t*this.size.x+e]=n,this},c.prototype.zeroBorder=function(){var e,t=this.size.x,n=this.size.y,r=this.data;for(e=0;e<t;e++)r[e]=r[(n-1)*t+e]=0;for(e=1;e<n-1;e++)r[e*t]=r[e*t+(t-1)]=0},c.prototype.invert=function(){for(var e=this.data,t=e.length;t--;)e[t]=e[t]?0:1},c.prototype.convolve=function(e){var t,n,r,o,i=e.length/2|0,a=0;for(n=0;n<this.size.y;n++)for(t=0;t<this.size.x;t++){for(a=0,o=-i;o<=i;o++)for(r=-i;r<=i;r++)a+=e[o+i][r+i]*this.getSafe(t+r,n+o);this.data[n*this.size.x+t]=a}},c.prototype.moments=function(e){var t,n,r,o,i,c,s,u,f,d,l=this.data,p=this.size.y,h=this.size.x,v=[],g=[],m=Math.PI,y=m/4;if(e<=0)return g;for(i=0;i<e;i++)v[i]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(n=0;n<p;n++)for(o=n*n,t=0;t<h;t++)(r=l[n*h+t])>0&&((c=v[r-1]).m00+=1,c.m01+=n,c.m10+=t,c.m11+=t*n,c.m02+=o,c.m20+=t*t);for(i=0;i<e;i++)c=v[i],isNaN(c.m00)||0===c.m00||(u=c.m10/c.m00,f=c.m01/c.m00,s=c.m11/c.m00-u*f,d=(c.m02/c.m00-f*f-(c.m20/c.m00-u*u))/(2*s),d=.5*Math.atan(d)+(s>=0?y:-y)+m,c.theta=(180*d/m+90)%180-90,c.theta<0&&(c.theta+=180),c.rad=d>m?d-m:d,c.vec=a.clone([Math.cos(d),Math.sin(d)]),g.push(c));return g},c.prototype.show=function(e,t){var n,r,o,i,a,c,s;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,s=0;s<this.size.y;s++)for(c=0;c<this.size.x;c++)a=s*this.size.x+c,i=this.get(c,s)*t,o[4*a+0]=i,o[4*a+1]=i,o[4*a+2]=i,o[4*a+3]=255;n.putImageData(r,0,0)},c.prototype.overlay=function(e,t,n){(!t||t<0||t>360)&&(t=360);for(var r=[0,1,1],i=[0,0,0],a=[255,255,255],c=[0,0,0],s=[],u=e.getContext("2d"),f=u.getImageData(n.x,n.y,this.size.x,this.size.y),d=f.data,l=this.data.length;l--;)r[0]=this.data[l]*t,s=r[0]<=0?a:r[0]>=360?c:o.a.bind()(r,i),d[4*l+0]=s[0],d[4*l+1]=s[1],d[4*l+2]=s[2],d[4*l+3]=255;u.putImageData(f,n.x,n.y)},t.a=c},function(e,t,n){var r=n(5)(n(3),"Map");e.e=r},function(e,t,n){var r=n(177),o=n(178),i=n(179),a=n(180),c=n(181);function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.e=s},function(e,t,n){e.e=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(47);e.e=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(52);e.e=function(e,t,n,o){n||(n={});for(var i=-1,a=t.length;++i<a;){var c=t[i],s=o?o(n[c],e[c],c,n,e):void 0;r(n,c,void 0===s?e[c]:s)}return n}},function(e,t,n){var r=n(37)(Object.getPrototypeOf,Object);e.e=r},function(e,t,n){var r=n(37),o=n(74),i=Object.getOwnPropertySymbols,a=i?r(i,Object):o;e.e=a},function(e,t,n){var r=n(110),o=n(28),i=n(112),a=n(113),c=n(115),s=n(125),u=n(69),f="[object Map]",d="[object Promise]",l="[object Set]",p="[object WeakMap]",h="[object DataView]",v=Object.prototype.toString,g=u(r),m=u(o),y=u(i),b=u(a),_=u(c),w=s;(r&&w(new r(new ArrayBuffer(1)))!=h||o&&w(new o)!=f||i&&w(i.resolve())!=d||a&&w(new a)!=l||c&&w(new c)!=p)&&(w=function(e){var t=v.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):void 0;if(r)switch(r){case g:return h;case m:return f;case y:return d;case b:return l;case _:return p}return t}),e.e=w},function(e,t,n){var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.e=function(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){e.e=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(2),o="[object Function]",i="[object GeneratorFunction]",a=Object.prototype.toString;e.e=function(e){var t=r(e)?a.call(e):"";return t==o||t==i}},function(e,t,n){var r=9007199254740991;e.e=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,n){var r=n(13),o="[object Symbol]",i=Object.prototype.toString;e.e=function(e){return"symbol"==typeof e||r(e)&&i.call(e)==o}},function(e,t,n){var r=n(130),o=n(141),i=n(183),a=i&&i.isTypedArray,c=a?o(a):r;e.e=c},function(e,t,n){var r=n(6);t.a={create:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=[],i=e.capacity||20,a=!0===e.capture;function c(t){return i&&t&&(o=t,!((a=e.blacklist)&&a.some(function(e){return Object.keys(e).every(function(t){return e[t]===o[t]})})))&&(n=t,"function"!=typeof(r=e.filter)||r(n));var n,r,o,a}return{addResult:function(e,s,u){var f={};c(u)&&(i--,f.codeResult=u,a&&(t.width=s.x,t.height=s.y,r.a.drawImage(e,s,n),f.frame=t.toDataURL()),o.push(f))},getResults:function(){return o}}}}},function(e,t,n){var r=void 0;r=n(82),t.a=r},function(e,t,n){t.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(e,t){var n,r=e.data,o=t.data,i=this.searchDirections,a=e.size.x;function c(e,t,c,s){var u,f,d;for(u=0;u<7;u++){if(f=e.cy+i[e.dir][0],d=e.cx+i[e.dir][1],r[n=f*a+d]===t&&(0===o[n]||o[n]===c))return o[n]=c,e.cy=f,e.cx=d,!0;0===o[n]&&(o[n]=s),e.dir=(e.dir+1)%8}return!1}function s(e,t,n){return{dir:n,x:e,y:t,next:null,prev:null}}return{trace:function(e,t,n,r){return c(e,t,n,r)},contourTracing:function(e,t,n,r,o){return function(e,t,n,r,o){var i,a,u,f=null,d={cx:t,cy:e,dir:0};if(c(d,r,n,o)){i=f=s(t,e,d.dir),u=d.dir,(a=s(d.cx,d.cy,0)).prev=i,i.next=a,a.next=null,i=a;do{d.dir=(d.dir+6)%8,c(d,r,n,o),u!==d.dir?(i.dir=d.dir,(a=s(d.cx,d.cy,0)).prev=i,i.next=a,a.next=null,i=a):(i.dir=u,i.x=d.cx,i.y=d.cy),u=d.dir}while(d.cx!==t||d.cy!==e);f.prev=i.prev,i.prev.next=f}return f}(e,t,n,r,o)}}}}},function(e,t,n){var r=n(7),o=n(16);function i(){r.a.call(this)}i.prototype=Object.create(r.a.prototype,{ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}}),i.prototype.constructor=i,i.prototype._toCounters=function(e,t){var n,r=t.length,i=this._row.length,a=!this._row[e],c=0;for(o.a.init(t,0),n=e;n<i;n++)if(this._row[n]^a)t[c]++;else{if(++c===r)break;t[c]=1,a=!a}return t},i.prototype._decode=function(){var e,t,n,r,i=this,a=[0,0,0,0,0,0,0,0,0],c=[],s=i._findStart();if(!s)return null;r=i._nextSet(i._row,s.end);do{if(a=i._toCounters(r,a),(n=i._toPattern(a))<0)return null;if((e=i._patternToChar(n))<0)return null;c.push(e),t=r,r+=o.a.sum(a),r=i._nextSet(i._row,r)}while("*"!==e);return c.pop(),c.length&&i._verifyTrailingWhitespace(t,r,a)?{code:c.join(""),start:s.start,end:r,startInfo:s,decodedCodes:c}:null},i.prototype._verifyTrailingWhitespace=function(e,t,n){var r=o.a.sum(n);return 3*(t-e-r)>=r},i.prototype._patternToChar=function(e){var t;for(t=0;t<this.CHARACTER_ENCODINGS.length;t++)if(this.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(this.ALPHABET[t]);return-1},i.prototype._findNextWidth=function(e,t){var n,r=Number.MAX_VALUE;for(n=0;n<e.length;n++)e[n]<r&&e[n]>t&&(r=e[n]);return r},i.prototype._toPattern=function(e){for(var t,n,r=e.length,o=0,i=r,a=0;i>3;){for(o=this._findNextWidth(e,o),i=0,t=0,n=0;n<r;n++)e[n]>o&&(t|=1<<r-1-n,i++,a+=e[n]);if(3===i){for(n=0;n<r&&i>0;n++)if(e[n]>o&&(i--,2*e[n]>=a))return-1;return t}}return-1},i.prototype._findStart=function(){var e,t,n,r=this,o=r._nextSet(r._row),i=o,a=[0,0,0,0,0,0,0,0,0],c=0,s=!1;for(e=o;e<r._row.length;e++)if(r._row[e]^s)a[c]++;else{if(c===a.length-1){if(r._toPattern(a)===r.ASTERISK&&(n=Math.floor(Math.max(0,i-(e-i)/4)),r._matchRange(n,i,0)))return{start:i,end:e};for(i+=a[0]+a[1],t=0;t<7;t++)a[t]=a[t+2];a[7]=0,a[8]=0,c--}else c++;a[c]=1,s=!s}return null},t.a=i},function(e,t,n){e.e=function(e,t){return e[0]*t[0]+e[1]*t[1]}},function(e,t,n){var r=n(3).Uint8Array;e.e=r},function(e,t,n){e.e=function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(139),o=n(11),i=n(0),a=n(36),c=Object.prototype.hasOwnProperty;e.e=function(e,t){var n=i(e)||o(e)?r(e.length,String):[],s=n.length,u=!!s;for(var f in e)!t&&!c.call(e,f)||u&&("length"==f||a(f,s))||n.push(f);return n}},function(e,t,n){e.e=function(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}},function(e,t,n){var r=n(10);e.e=function(e,t,n){(void 0===n||r(e[t],n))&&("number"!=typeof t||void 0!==n||t in e)||(e[t]=n)}},function(e,t,n){var r=n(10),o=Object.prototype.hasOwnProperty;e.e=function(e,t,n){var i=e[t];o.call(e,t)&&r(i,n)&&(void 0!==n||t in e)||(e[t]=n)}},function(e,t,n){var r=n(60),o=n(23),i=n(9);e.e=function(e,t){for(var n=0,a=(t=o(t,e)?[t]:r(t)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){var r=n(30),o=n(0);e.e=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t,n){var r=n(127),o=n(2),i=n(13);e.e=function e(t,n,a,c,s){return t===n||(null==t||null==n||!o(t)&&!i(n)?t!=t&&n!=n:r(t,n,e,a,c,s))}},function(e,t,n){var r=n(132),o=n(133),i=n(194),a=n(0),c=n(201);e.e=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):c(e)}},function(e,t,n){var r=n(2),o=n(24),i=n(182),a=Object.prototype.hasOwnProperty;e.e=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&a.call(e,c))&&n.push(c);return n}},function(e,t,n){e.e=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],c=e[a];n(c,a)&&(i[a]=c)}return i}},function(e,t,n){var r=n(118),o=Math.max;e.e=function(e,t){return t=o(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=o(n.length-t,0),c=Array(a);++i<a;)c[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=c,r(e,this,s)}}},function(e,t,n){var r=n(0),o=n(191);e.e=function(e){return r(e)?e:o(e)}},function(e,t,n){e.e=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(114),o=n(120),i=1,a=2;e.e=function(e,t,n,c,s,u){var f=s&a,d=e.length,l=t.length;if(d!=l&&!(f&&l>d))return!1;var p=u.get(e);if(p&&u.get(t))return p==t;var h=-1,v=!0,g=s&i?new r:void 0;for(u.set(e,t),u.set(t,e);++h<d;){var m=e[h],y=t[h];if(c)var b=f?c(y,m,h,t,e,u):c(m,y,h,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!o(t,function(e,t){if(!g.has(t)&&(m===e||n(m,e,c,s,u)))return g.add(t)})){v=!1;break}}else if(m!==y&&!n(m,y,c,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.e=n}).call(t,function(){return this}())},function(e,t,n){var r=n(2);e.e=function(e){return e==e&&!r(e)}},function(e,t,n){e.e=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t,n){e.e=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(37)(Object.keys,Object);e.e=r},function(e,t,n){e.e=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=Function.prototype.toString;e.e=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(12),o=n(13);e.e=function(e){return o(e)&&r(e)}},function(e,t,n){(function(e){var r=n(3),o=n(202),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===i?r.Buffer:void 0,s=(c?c.isBuffer:void 0)||o;e.e=s}).call(t,n(75)(e))},function(e,t,n){var r=n(49),o=n(57),i=n(12);e.e=function(e){return i(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(119),o=n(124),i=n(136),a=n(59),c=n(9),s=a(function(e,t){return null==e?{}:i(e,r(o(t,1),c))});e.e=s},function(e,t,n){e.e=function(){return[]}},function(e,t,n){e.e=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],Object.defineProperty(e,"exports",{enumerable:!0,configurable:!1,get:function(){return e.e},set:function(t){return e.e=t}}),Object.defineProperty(e,"loaded",{enumerable:!0,configurable:!1,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,configurable:!1,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(15),o=r&&r.__esModule?function(){return r.default}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(81),a=i&&i.__esModule?function(){return i.default}:function(){return i};Object.defineProperty(a,"a",{get:a});var c=n(206),s=c&&c.__esModule?function(){return c.default}:function(){return c};Object.defineProperty(s,"a",{get:s});var u=n(103),f=n(27),d=n(6),l=n(42),p=n(43),h=n(86),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=u.a.bind()(),n=null,r=!1;return{addEventListener:function(e,n){return t.subscribe(e,n),this},removeEventListener:function(e,n){return t.unsubscribe(e,n),this},start:function(){return t.isRunning()?Promise.resolve(!0):n||(r?(t.start(),Promise.resolve(!0)):n=new Promise(function(o,i){t.init(e,function(e){e&&(console.log(e),i(e)),r=!0,t.start(),o(),n=null})}))},stop:function(){return t.stop(),r=!1,this},toPromise:function(){var n=this;if("LiveStream"!==e.inputStream.type&&"VideoStream"!==e.inputStream.type)return new Promise(function(n,r){t.decodeSingle(e,function(e){return e&&e.codeResult&&e.codeResult.code?n(e):r(e)})});var r,o=(r=!1,{v:{cancel:function(){r=!0},promise:new Promise(function(e,o){t.subscribe("processed",function n(i){i&&i.codeResult&&i.codeResult.code&&(t.stop(),t.unsubscribe("processed",n),e(i)),r&&(t.stop(),t.unsubscribe("processed",n),o("cancelled!"))}),n.start()})}});return"object"===(void 0===o?"undefined":v(o))?o.v:void 0},registerResultCollector:function(e){t.registerResultCollector(e)},getCanvas:function(){return t.canvas.dom.image}}}function m(){var e,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return y(o.a.bind()({},t,((e={})[n]=r,e)))}function y(){var e=arguments.length<=0||void 0===arguments[0]?p.a:arguments[0];return{fromSource:function(t,n){return function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return g(e=h.a.bind()(e,n,t))}(e,t,n)},fromConfig:function(t){return g(o.a.bind()({},e,t))},decoder:function(t){return m(e,"decoder",t)},locator:function(t){return m(e,"locator",t)},throttle:function(t){return m(e,"frequency",1e3/parseInt(t))},config:function(t){return y(o.a.bind()({},e,t))},ImageWrapper:f.a,ImageDebug:d.a,ResultCollector:l.a,_worker:{createScanner:u.a}}}t.default=y()},function(e,t,n){var r={clone:n(8),dot:n(46)};t.a={create:function(e,t){var n=[],o={rad:0,vec:r.clone([0,0])},i={};function a(e){i[e.id]=e,n.push(e)}function c(){var e,t=0;for(e=0;e<n.length;e++)t+=n[e].rad;o.rad=t/n.length,o.vec=r.clone([Math.cos(o.rad),Math.sin(o.rad)])}return a(e),c(),{add:function(e){i[e.id]||(a(e),c())},fits:function(e){return Math.abs(r.dot(e.point.vec,o.vec))>t},getPoints:function(){return n},getCenter:function(){return o}}},createPoint:function(e,t,n){return{rad:e[n],point:e,id:t}}}},function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="undefined"!=typeof window?window:{},i=["MediaStream","HTMLImageElement","HTMLVideoElement","HTMLCanvasElement","FileList","File","URL"].reduce(function(e,t){var n;return r({},e,((n={})[t]=t in o?o[t]:function(){},n))},{});i.setObject=function(e,t){i[e]=t},t.a=i},function(e,t,n){t.a=function(){var e={};function t(t){return e[t]||(e[t]={subscribers:[]}),e[t]}function n(e,t){e.async?setTimeout(function(){e.callback(t)},4):e.callback(t)}function r(e,n,r){var o;if("function"==typeof n)o={callback:n,async:r};else if(!(o=n).callback)throw"Callback was not specified on options";t(e).subscribers.push(o)}return{subscribe:function(e,t,n){return r(e,t,n)},publish:function(e,r){var o=t(e),i=o.subscribers;i.filter(function(e){return!!e.once}).forEach(function(e){n(e,r)}),o.subscribers=i.filter(function(e){return!e.once}),o.subscribers.forEach(function(e){n(e,r)})},once:function(e,t,n){r(e,{callback:t,async:n,once:!0})},unsubscribe:function(n,r){var o;n?(o=t(n)).subscribers=o&&r?o.subscribers.filter(function(e){return e.callback!==r}):[]:e={}}}}},function(e,t,n){function r(e,t,n){n||(n={data:null,size:t}),this.data=n.data,this.originalSize=n.size,this.I=n,this.from=e,this.size=t}r.prototype.show=function(e,t){var n,r,o,i,a,c,s;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,a=0;a<this.size.y;a++)for(c=0;c<this.size.x;c++)s=a*this.size.x+c,i=this.get(c,a)*t,o[4*s+0]=i,o[4*s+1]=i,o[4*s+2]=i,o[4*s+3]=255;r.data=o,n.putImageData(r,0,0)},r.prototype.get=function(e,t){return this.data[(this.from.y+t)*this.originalSize.x+this.from.x+e]},r.prototype.updateData=function(e){this.originalSize=e.size,this.data=e.data},r.prototype.updateFrom=function(e){return this.from=e,this},t.a=r},function(e,t){"undefined"!=typeof window&&(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}),Math.imul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0}},function(e,t,n){e.e={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:2,decoder:{readers:["code_128_reader"],debug:{drawBoundingBox:!1,showFrequency:!1,drawScanline:!1,showPattern:!1}},locator:{halfSample:!0,patchSize:"medium",debug:{showCanvas:!1,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!1,showTransformedBox:!1,showBB:!1}}}}},function(e,t,n){var r=n(84),o=n(6),i=n(95),a=n(4),c=n(45),s=n(96),u=n(94),f=n(102),d=n(99),l=n(97),p=n(98),h=n(101),v=n(100),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},m={code_128_reader:i.a,ean_reader:a.a,ean_5_reader:p.a,ean_2_reader:l.a,ean_8_reader:d.a,code_39_reader:c.a,code_39_vin_reader:s.a,codabar_reader:u.a,upc_reader:f.a,upc_e_reader:h.a,i2of5_reader:v.a};t.a={create:function(e,t){var n={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},i=[];function a(){e.readers.forEach(function(e){var t,n={},r=[];"object"===(void 0===e?"undefined":g(e))?(t=e.format,n=e.config):"string"==typeof e&&(t=e),console.log("Before registering reader: ",t),n.supplements&&(r=n.supplements.map(function(e){return new m[e]})),i.push(new m[t](n,r))}),console.log("Registered Readers: "+i.map(function(e){return JSON.stringify({format:e.FORMAT,config:e.config})}).join(", "))}function c(a){var c,s=null,u=r.a.getBarcodeLine(t,a[0],a[1]);for(e.debug.showFrequency&&(o.a.drawPath(a,{x:"x",y:"y"},n.ctx.overlay,{color:"red",lineWidth:3}),r.a.debug.printFrequency(u.line,n.dom.frequency)),r.a.toBinaryLine(u),e.debug.showPattern&&r.a.debug.printPattern(u.line,n.dom.pattern),c=0;c<i.length&&null===s;c++)s=i[c].decodePattern(u.line);return null===s?null:{codeResult:s,barcodeLine:u}}function s(r){var i,a,s,u,f,d,l=n.ctx.overlay;return e.debug.drawBoundingBox&&l&&o.a.drawPath(r,{x:0,y:1},l,{color:"blue",lineWidth:2}),i=[{x:((f=r)[1][0]-f[0][0])/2+f[0][0],y:(f[1][1]-f[0][1])/2+f[0][1]},{x:(f[3][0]-f[2][0])/2+f[2][0],y:(f[3][1]-f[2][1])/2+f[2][1]}],d=i,u=Math.sqrt(Math.pow(Math.abs(d[1].y-d[0].y),2)+Math.pow(Math.abs(d[1].x-d[0].x),2)),null===(i=function(e,n,r){function o(t){var r=t*Math.sin(n),o=t*Math.cos(n);e[0].y-=r,e[0].x-=o,e[1].y+=r,e[1].x+=o}for(o(r);r>1&&(!t.inImageWithBorder(e[0],0)||!t.inImageWithBorder(e[1],0));)o(-(r-=Math.ceil(r/2)));return e}(i,a=Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x),Math.floor(.1*u)))?null:(null===(s=c(i))&&(s=function(e,t,n){var r,o,i,a=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),s=null,u=Math.sin(n),f=Math.cos(n);for(r=1;r<16&&null===s;r++)i={y:(o=a/16*r*(r%2==0?-1:1))*u,x:o*f},t[0].y+=i.x,t[0].x-=i.y,t[1].y+=i.x,t[1].x-=i.y,s=c(t);return s}(r,i,a)),null===s?null:(s&&e.debug.drawScanline&&l&&o.a.drawPath(i,{x:"x",y:"y"},l,{color:"red",lineWidth:3}),{codeResult:s.codeResult,line:i,angle:a,pattern:s.barcodeLine.line,threshold:s.barcodeLine.threshold}))}return function(){if("undefined"!=typeof document){var e=document.querySelector("#debug.detection");n.dom.frequency=document.querySelector("canvas.frequency"),n.dom.frequency||(n.dom.frequency=document.createElement("canvas"),n.dom.frequency.className="frequency",e&&e.appendChild(n.dom.frequency)),n.ctx.frequency=n.dom.frequency.getContext("2d"),n.dom.pattern=document.querySelector("canvas.patternBuffer"),n.dom.pattern||(n.dom.pattern=document.createElement("canvas"),n.dom.pattern.className="patternBuffer",e&&e.appendChild(n.dom.pattern)),n.ctx.pattern=n.dom.pattern.getContext("2d"),e&&(n.dom.overlay=document.querySelector("canvas.drawingBuffer"),n.dom.overlay||(n.dom.overlay=document.createElement("canvas"),n.dom.overlay.className="drawingBuffer",e.appendChild(n.dom.overlay)),n.ctx.overlay=n.dom.overlay.getContext("2d"))}}(),a(),function(){if("undefined"!=typeof document){var t,r=[{node:n.dom.frequency,prop:e.debug.showFrequency},{node:n.dom.pattern,prop:e.debug.showPattern}];for(t=0;t<r.length;t++)!0===r[t].prop?r[t].node.style.display="block":r[t].node.style.display="none"}}(),{decodeFromBoundingBox:function(e){return s(e)},decodeFromBoundingBoxes:function(t){var n,r,o=[],i=e.multiple;for(n=0;n<t.length;n++){var a=t[n];if((r=s(a)||{}).box=a,i)o.push(r);else if(r.codeResult)return r}if(i)return{barcodes:o}},setReaders:function(t){e.readers=t,i.length=0,a()}}}}},function(e,t,n){var r={},o={UP:1,DOWN:-1};r.getBarcodeLine=function(e,t,n){var r,o,i,a,c,s,u,f,d=0|t.x,l=0|t.y,p=0|n.x,h=0|n.y,v=Math.abs(h-l)>Math.abs(p-d),g=[],m=e.data,y=e.size.x,b=255,_=0;function w(e,t){f=m[t*y+e],f,b=f<b?f:b,_=f>_?f:_,g.push(f)}for(v&&(s=d,d=l,l=s,s=p,p=h,h=s),d>p&&(s=d,d=p,p=s,s=l,l=h,h=s),r=p-d,o=Math.abs(h-l),i=r/2|0,c=l,a=l<h?1:-1,u=d;u<p;u++)v?w(c,u):w(u,c),(i-=o)<0&&(c+=a,i+=r);return{line:g,min:b,max:_}},r.toBinaryLine=function(e){var t,n,r,i,a,c,s=e.min,u=e.max,f=e.line,d=s+(u-s)/2,l=[],p=(u-s)/12,h=-p;for(r=f[0]>d?o.UP:o.DOWN,l.push({pos:0,val:f[0]}),a=0;a<f.length-2;a++)r!==(i=(t=f[a+1]-f[a])+(n=f[a+2]-f[a+1])<h&&f[a+1]<1.5*d?o.DOWN:t+n>p&&f[a+1]>.5*d?o.UP:r)&&(l.push({pos:a,val:f[a]}),r=i);for(l.push({pos:f.length,val:f[f.length-1]}),c=l[0].pos;c<l[1].pos;c++)f[c]=f[c]>d?0:1;for(a=1;a<l.length-1;a++)for(p=l[a+1].val>l[a].val?l[a].val+(l[a+1].val-l[a].val)/3*2|0:l[a+1].val+(l[a].val-l[a+1].val)/3|0,c=l[a].pos;c<l[a+1].pos;c++)f[c]=f[c]>p?0:1;return{line:f,threshold:p}},r.debug={printFrequency:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,t.height=256,r.beginPath(),r.strokeStyle="blue",n=0;n<e.length;n++)r.moveTo(n,255),r.lineTo(n,255-e[n]);r.stroke(),r.closePath()},printPattern:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,r.fillColor="black",n=0;n<e.length;n++)1===e[n]&&r.fillRect(n,0,1,100)}},t.a=r},function(e,t,n){var r,o=n(73),i=o&&o.__esModule?function(){return o.default}:function(){return o};function a(e,t){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then(function(t){return new Promise(function(n){r=t,e.setAttribute("autoplay","true"),e.srcObject=t,e.addEventListener("loadedmetadata",function(){e.play(),n()})})}).then(function(e){return new Promise(function(t,n){var r=10;!function o(){r>0?e.videoWidth>0&&e.videoHeight>0?(console.log(e.videoWidth+"px x "+e.videoHeight+"px"),t()):window.setTimeout(o,500):n("Unable to play video stream. Is webcam working?"),r--}()})}.bind(null,e)):Promise.reject(new Error("getUserMedia is not defined"))}function c(e){return{audio:!1,video:(t=e,n=i.a.bind()(t,["width","height","facingMode","aspectRatio","deviceId"]),void 0!==t.minAspectRatio&&t.minAspectRatio>0&&(n.aspectRatio=t.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==t.facing&&(n.facingMode=t.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),n)};var t,n}Object.defineProperty(i,"a",{get:i}),t.a={request:function(e,t){return a(e,c(t))},release:function(){var e=r&&r.getVideoTracks();e&&e.length&&e[0].stop(),r=null}}},function(e,t,n){var r=n(195),o=r&&r.__esModule?function(){return r.default}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(199),a=i&&i.__esModule?function(){return i.default}:function(){return i};Object.defineProperty(a,"a",{get:a});var c=n(73),s=c&&c.__esModule?function(){return c.default}:function(){return c};Object.defineProperty(s,"a",{get:s});var u=n(15),f=u&&u.__esModule?function(){return u.default}:function(){return u};Object.defineProperty(f,"a",{get:f});var d=n(78);t.a=function(e,t,n){{if(n instanceof d.a.MediaStream)return function(e,t){t.srcObject,arguments.length<=2||void 0===arguments[2]||arguments[2];throw new Error('Source "MediaStream": not implemented!')}(e,t,{srcObject:n});if(n instanceof d.a.HTMLImageElement)throw new Error('Source "HTMLImageElement": not yet supported');if(n instanceof d.a.HTMLVideoElement)throw new Error('Source "HTMLVideoElement": not yet supported');if(n instanceof d.a.HTMLCanvasElement)return function(e,t){t.canvas,arguments.length<=2||void 0===arguments[2]||arguments[2];throw new Error('Source "Canvas": not implemented!')}(e,t,{canvas:n});if(!(n instanceof d.a.FileList)){if(n instanceof d.a.File)return _(e,t,n);if("string"==typeof n)return function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],r=(n.match(p.regex)||[])[1];if(r)return b(e,t,{src:n,mime:r});if(n.match(h.regex))throw new Error('Source "objectURL": not supported');var o=(n.match(v.regex)||[])[2];if(o)return function(e,t,n){var r=n.src,o=n.ext;{if(o.match(g.regex))return y(e,{src:r},t);if(o.match(m.regex))return w(e,{src:r},t)}throw new Error('Source "MediaString": not recognized')}(e,t,{src:n,ext:o});throw new Error('Source "'+n+'": not recognized')}(e,t,n);if("object"!==(void 0===n?"undefined":l(n))||void 0===n.constraints&&void 0===n.area)throw new Error("No source given!");return function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return f.a.bind()({},e,{inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"}}},{inputStream:t})}(e,n)}if(n.length>0)return _(e,t,n[0])}};var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p={regex:/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i},h={regex:/^\s*blob:(.*)$/i},v={regex:/^(?:(?:http[s]?|ftp):\/)?\/?(?:(?:[^:\/\s]+)(?:(?:\/\w+)*\/))?([\w\-]+\.([^#?\s]+))(?:.*)?(?:#[\w\-]+)?$/i},g={regex:/(jpe?g|png|gif|tiff)(?:\s+|$)/i},m={regex:/(webm|ogg|mp4|m4v)/i};function y(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r={inputStream:f.a.bind()({type:"ImageStream",sequence:!1,size:800},t),numOfWorkers:e.debug?0:1};return f.a.bind()(e,r,{numOfWorkers:"number"==typeof e.numOfWorkers&&e.numOfWorkers>0?1:0},{inputStream:a.a.bind()(s.a.bind()(e.inputStream,["size"]),o.a)},{inputStream:n})}function b(e,t,n){var r=n.src,o=(n.mime.match(/^(video|image)\/(.*)$/i)||[])[1];if("video"===o)return w(e,{src:r},t);if("image"===o)return y(e,{src:r},t);throw new Error('Source with mimetype: "'+o+'" not supported')}function _(e,t,n){return b(e,t,{src:d.a.URL.createObjectURL(n),mime:n.type})}function w(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return f.a.bind()({},e,{inputStream:f.a.bind()({type:"VideoStream"},t)},{inputStream:n})}},function(e,t,n){t.a=function(e){var t=arguments.length<=1||void 0===arguments[1]?o:arguments[1];if(/^blob\:/i.test(e))return(n=e,new Promise(function(e,t){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="blob",r.onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE||200!==r.status&&0!==r.status||e(this.response)},r.onerror=t,r.send()})).then(i).then(function(e){return function(e){var t=arguments.length<=1||void 0===arguments[1]?o:arguments[1],n=new DataView(e),i=e.byteLength,c=t.reduce(function(e,t){var n=Object.keys(r).filter(function(e){return r[e]===t})[0];return n&&(e[n]=t),e},{}),s=2;if(255!==n.getUint8(0)||216!==n.getUint8(1))return!1;for(;s<i;){if(255!==n.getUint8(s))return!1;if(225===n.getUint8(s+1))return a(n,s+4,c);s+=2+n.getUint16(s+2)}}(e,t)});var n;return Promise.resolve(null)};var r={274:"orientation"},o=Object.keys(r).map(function(e){return r[e]});function i(e){return new Promise(function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e)})}function a(e,t,n){if("Exif"!==function(e,t,n){for(var r="",o=t;o<t+n;o++)r+=String.fromCharCode(e.getUint8(o));return r}(e,t,4))return!1;var r=t+6,o=void 0;if(18761===e.getUint16(r))o=!1;else{if(19789!==e.getUint16(r))return!1;o=!0}if(42!==e.getUint16(r+2,!o))return!1;var i=e.getUint32(r+4,!o);return!(i<8)&&function(e,t,n,r,o){for(var i=e.getUint16(n,!o),a={},s=0;s<i;s++){var u=n+12*s+2,f=r[e.getUint16(u,!o)];f&&(a[f]=c(e,u,t,n,o))}return a}(e,r,r+i,n,o)}function c(e,t,n,r,o){var i=e.getUint16(t+2,!o),a=e.getUint32(t+4,!o);switch(i){case 3:if(1===a)return e.getUint16(t+8,!o)}}},function(e,t,n){var r=n(26),o=Math.PI/180;var i={};i.create=function(e,t){var n,i={},a=e.getConfig(),c=r.f.bind()(e.getRealWidth(),e.getRealHeight()),s=e.getCanvasSize(),u=r.f.bind()(e.getWidth(),e.getHeight()),f=e.getTopRight(),d=f.x,l=f.y,p=null,h=null;return(n=t||document.createElement("canvas")).width=s.x,n.height=s.y,p=n.getContext("2d"),h=new Uint8Array(u.x*u.y),console.log("FrameGrabber",JSON.stringify({size:u,topRight:f,videoSize:c,canvasSize:s})),i.attachData=function(e){h=e},i.getData=function(){return h},i.grab=function(){var t,i,c,f=a.halfSample,v=e.getFrame(),g=v,m=0;if(g){if(c=s,(i=n).width!==c.x&&(console.log("WARNING: canvas-size needs to be adjusted"),i.width=c.x),i.height!==c.y&&(console.log("WARNING: canvas-size needs to be adjusted"),i.height=c.y),"ImageStream"===a.type&&(g=v.img,v.tags&&v.tags.orientation))switch(v.tags.orientation){case 6:m=90*o;break;case 8:m=-90*o}return 0!==m?(p.translate(s.x/2,s.y/2),p.rotate(m),p.drawImage(g,-s.y/2,-s.x/2,s.y,s.x),p.rotate(-m),p.translate(-s.x/2,-s.y/2)):p.drawImage(g,0,0,s.x,s.y),t=p.getImageData(d,l,u.x,u.y).data,f?r.i.bind()(t,u,h):r.j.bind()(t,h,a),!0}return!1},i.getSize=function(){return u},i},t.a=i},function(e,t,n){var r=n(87),o={};function i(e,t){e.onload=function(){t.loaded(this)}}o.load=function(e,t,n,o,a){var c,s,u,f=new Array(o),d=new Array(f.length);if(!1===a)f[0]=e;else for(c=0;c<f.length;c++)u=n+c,f[c]=e+"image-"+("00"+u).slice(-3)+".jpg";for(d.notLoaded=[],d.addImage=function(e){d.notLoaded.push(e)},d.loaded=function(n){for(var o=d.notLoaded,i=0;i<o.length;i++)if(o[i]===n){o.splice(i,1);for(var c=0;c<f.length;c++){var s=f[c].substr(f[c].lastIndexOf("/"));if(-1!==n.src.lastIndexOf(s)){d[c]={img:n};break}}break}0===o.length&&(console.log("Images loaded"),!1===a?r.a.bind()(e,["orientation"]).then(function(e){d[0].tags=e,t(d)}).catch(function(e){console.log(e),t(d)}):t(d))},c=0;c<f.length;c++)s=new Image,d.addImage(s),i(s,d),s.src=f[c]},t.a=o},function(e,t,n){var r=n(89),o={};o.createVideoStream=function(e){var t,n,r={},o=null,i=["canrecord","ended"],a={},c={x:0,y:0},s={x:0,y:0};return r.getRealWidth=function(){return e.videoWidth},r.getRealHeight=function(){return e.videoHeight},r.getWidth=function(){return t},r.getHeight=function(){return n},r.setWidth=function(e){t=e},r.setHeight=function(e){n=e},r.setInputStream=function(t){o=t,e.src=void 0!==t.src?t.src:""},r.ended=function(){return e.ended},r.getConfig=function(){return o},r.setAttribute=function(t,n){e.setAttribute(t,n)},r.pause=function(){e.pause()},r.play=function(){e.play()},r.setCurrentTime=function(t){"LiveStream"!==o.type&&(e.currentTime=t)},r.addEventListener=function(t,n,r){-1!==i.indexOf(t)?(a[t]||(a[t]=[]),a[t].push(n)):e.addEventListener(t,n,r)},r.clearEventHandlers=function(){i.forEach(function(t){var n=a[t];n&&n.length>0&&n.forEach(function(n){e.removeEventListener(t,n)})})},r.trigger=function(i,c){var u,f,d,l=a[i];if("canrecord"===i&&(f=e.videoWidth,d=e.videoHeight,t=o.size?f/d>1?o.size:Math.floor(f/d*o.size):f,n=o.size?f/d>1?Math.floor(d/f*o.size):o.size:d,s.x=t,s.y=n),l&&l.length>0)for(u=0;u<l.length;u++)l[u].apply(r,c)},r.setTopRight=function(e){c.x=e.x,c.y=e.y},r.getTopRight=function(){return c},r.setCanvasSize=function(e){s.x=e.x,s.y=e.y},r.getCanvasSize=function(){return s},r.getFrame=function(){return e},r},o.createLiveStream=function(e){e.setAttribute("autoplay",!0);var t=o.createVideoStream(e);return t.ended=function(){return!1},t},o.createImageStream=function(){var e,t,n={},o=null,i=0,a=0,c=0,s=!0,u=!1,f=null,d=0,l=1,p=null,h=!1,v=["canrecord","ended"],g={},m={x:0,y:0},y={x:0,y:0};function b(e,t){var r,o=g[e];if(o&&o.length>0)for(r=0;r<o.length;r++)o[r].apply(n,t)}return n.trigger=b,n.getWidth=function(){return e},n.getHeight=function(){return t},n.setWidth=function(t){e=t},n.setHeight=function(e){t=e},n.getRealWidth=function(){return i},n.getRealHeight=function(){return a},n.setInputStream=function(n){o=n,!1===n.sequence?(p=n.src,d=1):(p=n.src,d=n.length),u=!1,r.a.load(p,function(n){if(f=n,n[0].tags&&n[0].tags.orientation)switch(n[0].tags.orientation){case 6:case 8:i=n[0].img.height,a=n[0].img.width;break;default:i=n[0].img.width,a=n[0].img.height}else i=n[0].img.width,a=n[0].img.height;e=o.size?i/a>1?o.size:Math.floor(i/a*o.size):i,t=o.size?i/a>1?Math.floor(a/i*o.size):o.size:a,y.x=e,y.y=t,u=!0,c=0,setTimeout(function(){b("canrecord",[])},0)},l,d,o.sequence)},n.ended=function(){return h},n.setAttribute=function(){},n.getConfig=function(){return o},n.pause=function(){s=!0},n.play=function(){s=!1},n.setCurrentTime=function(e){c=e},n.addEventListener=function(e,t){-1!==v.indexOf(e)&&(g[e]||(g[e]=[]),g[e].push(t))},n.clearEventHandlers=function(){g={}},n.setTopRight=function(e){m.x=e.x,m.y=e.y},n.getTopRight=function(){return m},n.setCanvasSize=function(e){y.x=e.x,y.y=e.y},n.getCanvasSize=function(){return y},n.getFrame=function(){var e;return u?(s||(e=f[c],c<d-1?c++:setTimeout(function(){h=!0,b("ended",[])},0)),e):null},n},t.a=o},function(e,t,n){(function(e){var r=n(27),o=n(26),i=n(16),a=n(6),c=n(92),s=n(44),u=n(93);t.b=function(t,n){var l,p,h,v,g,m,y,b,_,w,C=n,E={ctx:{binary:null},dom:{binary:null}},S={x:0,y:0},T=t;function x(e){var t,n,r,o,i,c,s,u=b.size.x,l=b.size.y,p=-b.size.x,v=-b.size.y;for(t=0,n=0;n<e.length;n++)o=e[n],t+=o.rad,C.debug.showPatches&&a.a.drawRect(o.pos,h.size,E.ctx.binary,{color:"red"});for((t=(180*(t/=e.length)/Math.PI+90)%180-90)<0&&(t+=180),t=(180-t)*Math.PI/180,i=d.copy(d.create(),[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t)]),n=0;n<e.length;n++){for(o=e[n],r=0;r<4;r++)f.transformMat2(o.box[r],o.box[r],i);C.debug.boxFromPatches.showTransformed&&a.a.drawPath(o.box,{x:0,y:1},E.ctx.binary,{color:"#99ff00",lineWidth:2})}for(n=0;n<e.length;n++)for(o=e[n],r=0;r<4;r++)o.box[r][0]<u&&(u=o.box[r][0]),o.box[r][0]>p&&(p=o.box[r][0]),o.box[r][1]<l&&(l=o.box[r][1]),o.box[r][1]>v&&(v=o.box[r][1]);for(c=[[u,l],[p,l],[p,v],[u,v]],C.debug.boxFromPatches.showTransformedBox&&a.a.drawPath(c,{x:0,y:1},E.ctx.binary,{color:"#ff0000",lineWidth:2}),s=C.halfSample?2:1,i=d.invert(i,i),r=0;r<4;r++)f.transformMat2(c[r],c[r],i);for(C.debug.boxFromPatches.showBB&&a.a.drawPath(c,{x:0,y:1},E.ctx.binary,{color:"#ff0000",lineWidth:2}),r=0;r<4;r++)f.scale(c[r],c[r],s);return c}function R(e,t){b.subImageAsCopy(h,o.f.bind()(e,t)),w.skeletonize(),C.debug.showSkeleton&&p.overlay(E.dom.binary,360,o.f.bind()(e,t))}function O(e,t,n,r){var i,a,c,s,u=[],d=[],l=Math.ceil(_.x/3);if(e.length>=2){for(i=0;i<e.length;i++)e[i].m00>l&&u.push(e[i]);if(u.length>=2){for(c=function(e){var t=o.d.bind()(e,.9),n=o.e.bind()(t,1,function(e){return e.getPoints().length}),r=[],i=[];if(1===n.length){r=n[0].item.getPoints();for(var a=0;a<r.length;a++)i.push(r[a].point)}return i}(u),a=0,i=0;i<c.length;i++)a+=c[i].rad;c.length>1&&c.length>=u.length/4*3&&c.length>e.length/4&&(a/=c.length,s={index:t[1]*S.x+t[0],pos:{x:n,y:r},box:[f.clone([n,r]),f.clone([n+h.size.x,r]),f.clone([n+h.size.x,r+h.size.y]),f.clone([n,r+h.size.y])],moments:c,rad:a,vec:f.clone([Math.cos(a),Math.sin(a)])},d.push(s))}}return d}return l=C.halfSample?new r.a({x:T.size.x/2|0,y:T.size.y/2|0}):T,_=o.b.bind()(C.patchSize,l.size),S.x=l.size.x/_.x|0,S.y=l.size.y/_.y|0,b=new r.a(l.size,void 0,Uint8Array,!1),v=new r.a(_,void 0,Array,!0),P=new ArrayBuffer(65536),h=new r.a(_,new Uint8Array(P,0,_.x*_.y)),p=new r.a(_,new Uint8Array(P,_.x*_.y*3,_.x*_.y),void 0,!0),w=u.a.bind()("undefined"!=typeof window?window:"undefined"!=typeof self?self:e,{size:_.x},P),y=new r.a({x:l.size.x/h.size.x|0,y:l.size.y/h.size.y|0},void 0,Array,!0),g=new r.a(y.size,void 0,void 0,!0),m=new r.a(y.size,void 0,Int32Array,!0),C.useWorker||"undefined"==typeof document||(E.dom.binary=document.createElement("canvas"),E.dom.binary.className="binaryBuffer",!0===C.debug.showCanvas&&document.querySelector("#debug").appendChild(E.dom.binary),E.ctx.binary=E.dom.binary.getContext("2d"),E.dom.binary.width=b.size.x,E.dom.binary.height=b.size.y),{locate:function(){var e,t;if(C.halfSample&&o.g.bind()(T,l),o.c.bind()(l,b),b.zeroBorder(),C.debug.showCanvas&&b.show(E.dom.binary,255),(e=function(){var e,t,n,r,o,s,u,f,d=[];for(e=0;e<S.x;e++)for(t=0;t<S.y;t++)n=h.size.x*e,r=h.size.y*t,R(n,r),p.zeroBorder(),i.a.init(v.data,0),s=c.a.create(p,v),u=s.rasterize(0),C.debug.showLabels&&v.overlay(E.dom.binary,Math.floor(360/u.count),{x:n,y:r}),o=v.moments(u.count),d=d.concat(O(o,[e,t],n,r));if(C.debug.showFoundPatches)for(e=0;e<d.length;e++)f=d[e],a.a.drawRect(f.pos,h.size,E.ctx.binary,{color:"#99ff00",lineWidth:2});return d}()).length<S.x*S.y*.05)return null;var n=function(e){var t,n,r=0,c=.95,u=0,d=[0,1,1],l=[0,0,0];function p(){var e;for(e=0;e<m.data.length;e++)if(0===m.data[e]&&1===g.data[e])return e;return m.length}function v(e){var t,n,o,i,a,u={x:e%m.size.x,y:e/m.size.x|0};if(e<m.data.length)for(o=y.data[e],m.data[e]=r,a=0;a<s.a.searchDirections.length;a++)n=u.y+s.a.searchDirections[a][0],t=u.x+s.a.searchDirections[a][1],i=n*m.size.x+t,0!==g.data[i]?0===m.data[i]&&Math.abs(f.dot(y.data[i].vec,o.vec))>c&&v(i):m.data[i]=Number.MAX_VALUE}for(i.a.init(g.data,0),i.a.init(m.data,0),i.a.init(y.data,null),t=0;t<e.length;t++)n=e[t],y.data[n.index]=n,g.data[n.index]=1;for(g.zeroBorder();(u=p())<m.data.length;)r++,v(u);if(C.debug.showPatchLabels)for(t=0;t<m.data.length;t++)m.data[t]>0&&m.data[t]<=r&&(n=y.data[t],d[0]=m.data[t]/(r+1)*360,o.a.bind()(d,l),a.a.drawRect(n.pos,h.size,E.ctx.binary,{color:"rgb("+l.join(",")+")",lineWidth:2}));return r}(e);return n<1?null:0===(t=function(e){var t,n,r=[];for(t=0;t<e;t++)r.push(0);for(n=m.data.length;n--;)m.data[n]>0&&r[m.data[n]-1]++;return(r=r.map(function(e,t){return{val:e,label:t+1}})).sort(function(e,t){return t.val-e.val}),r.filter(function(e){return e.val>=5})}(n)).length?null:function(e,t){var n,r,i,c,s,u=[],f=[],d=[0,1,1],l=[0,0,0];for(n=0;n<e.length;n++){for(i=m.data.length,u.length=0;i--;)m.data[i]===e[n].label&&(c=y.data[i],u.push(c));if((s=x(u))&&(f.push(s),C.debug.showRemainingPatchLabels))for(r=0;r<u.length;r++)c=u[r],d[0]=e[n].label/(t+1)*360,o.a.bind()(d,l),a.a.drawRect(c.pos,h.size,E.ctx.binary,{color:"rgb("+l.join(",")+")",lineWidth:2})}return f}(t,n)}};var P},t.a=function(e,t){var n,r,i,a=e.getWidth(),c=e.getHeight(),s=t.halfSample?.5:1;e.getConfig().area&&(i=o.h.bind()(a,c,e.getConfig().area),e.setTopRight({x:i.sx,y:i.sy}),e.setCanvasSize({x:a,y:c}),a=i.sw,c=i.sh);r={x:Math.floor(a*s),y:Math.floor(c*s)},n=o.b.bind()(t.patchSize,r),console.log("Patch-Size: "+JSON.stringify(n));if(e.setWidth(Math.floor(Math.floor(r.x/n.x)*(1/s)*n.x)),e.setHeight(Math.floor(Math.floor(r.y/n.y)*(1/s)*n.y)),e.getWidth()%n.x==0&&e.getHeight()%n.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+a+" )and height ("+c+") must a multiple of "+n.x)};var f={clone:n(8),dot:n(46),scale:n(107),transformMat2:n(108)},d={copy:n(104),create:n(105),invert:n(106)}}).call(t,function(){return this}())},function(e,t,n){var r=n(44),o={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(e,t){var n=e.data,i=t.data,a=e.size.x,c=e.size.y,s=r.a.create(e,t);return{rasterize:function(e){var t,r,u,f,d,l,p,h,v,g,m,y,b=[],_=0;for(y=0;y<400;y++)b[y]=0;for(b[0]=n[0],v=null,l=1;l<c-1;l++)for(f=0,r=b[0],d=1;d<a-1;d++)if(0===i[m=l*a+d])if((t=n[m])!==r){if(0===f)b[u=_+1]=t,r=t,null!==(p=s.contourTracing(l,d,u,t,o.DIR.OUTSIDE_EDGE))&&(_++,f=u,(h=o.createContour2D()).dir=o.CONTOUR_DIR.CW_DIR,h.index=f,h.firstVertex=p,h.nextpeer=v,h.insideContours=null,null!==v&&(v.prevpeer=h),v=h);else if(null!==(p=s.contourTracing(l,d,o.DIR.INSIDE_EDGE,t,f))){for((h=o.createContour2D()).firstVertex=p,h.insideContours=null,h.dir=0===e?o.CONTOUR_DIR.CCW_DIR:o.CONTOUR_DIR.CW_DIR,h.index=e,g=v;null!==g&&g.index!==f;)g=g.nextpeer;null!==g&&(h.nextpeer=g.insideContours,null!==g.insideContours&&(g.insideContours.prevpeer=h),g.insideContours=h)}}else i[m]=f;else i[m]===o.DIR.OUTSIDE_EDGE||i[m]===o.DIR.INSIDE_EDGE?(f=0,r=i[m]===o.DIR.INSIDE_EDGE?n[m]:b[0]):r=b[f=i[m]];for(g=v;null!==g;)g.index=e,g=g.nextpeer;return{cc:v,count:_}},debug:{drawContour:function(e,t){var n,r,i,a=e.getContext("2d"),c=t;for(a.strokeStyle="red",a.fillStyle="red",a.lineWidth=1,n=null!==c?c.insideContours:null;null!==c;){switch(null!==n?(r=n,n=n.nextpeer):(r=c,n=null!==(c=c.nextpeer)?c.insideContours:null),r.dir){case o.CONTOUR_DIR.CW_DIR:a.strokeStyle="red";break;case o.CONTOUR_DIR.CCW_DIR:a.strokeStyle="blue";break;case o.CONTOUR_DIR.UNKNOWN_DIR:a.strokeStyle="green"}i=r.firstVertex,a.beginPath(),a.moveTo(i.x,i.y);do{i=i.next,a.lineTo(i.x,i.y)}while(i!==r.firstVertex);a.stroke()}}}}}};t.a=o},function(e,t,n){t.a=function(e,t,n){"use asm";var r=new e.Uint8Array(n),o=t.size|0,i=e.Math.imul;function a(e,t){e=e|0;t=t|0;var n=0,i=0,a=0,c=0,s=0,u=0,f=0,d=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){d=d+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){c=d-o|0;s=d+o|0;u=i-1|0;f=i+1|0;a=(r[e+c+u|0]|0)+(r[e+c+f|0]|0)+(r[e+d+i|0]|0)+(r[e+s+u|0]|0)+(r[e+s+f|0]|0)|0;if((a|0)==(5|0)){r[t+d+i|0]=1}else{r[t+d+i|0]=0}}}return}function c(e,t,n){e=e|0;t=t|0;n=n|0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;r[n+a|0]=(r[e+a|0]|0)-(r[t+a|0]|0)|0}}function s(e,t,n){e=e|0;t=t|0;n=n|0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;r[n+a|0]=r[e+a|0]|0|(r[t+a|0]|0)|0}}function u(e){e=e|0;var t=0,n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;t=(t|0)+(r[e+n|0]|0)|0}return t|0}function f(e,t){e=e|0;t=t|0;var n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;r[e+n|0]=t}}function d(e,t){e=e|0;t=t|0;var n=0,i=0,a=0,c=0,s=0,u=0,f=0,d=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){d=d+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){c=d-o|0;s=d+o|0;u=i-1|0;f=i+1|0;a=(r[e+c+u|0]|0)+(r[e+c+f|0]|0)+(r[e+d+i|0]|0)+(r[e+s+u|0]|0)+(r[e+s+f|0]|0)|0;if((a|0)>(0|0)){r[t+d+i|0]=1}else{r[t+d+i|0]=0}}}return}function l(e,t){e=e|0;t=t|0;var n=0;n=i(o,o)|0;while((n|0)>0){n=n-1|0;r[t+n|0]=r[e+n|0]|0}}function p(e){e=e|0;var t=0,n=0;for(t=0;(t|0)<(o-1|0);t=t+1|0){r[e+t|0]=0;r[e+n|0]=0;n=n+o-1|0;r[e+n|0]=0;n=n+1|0}for(t=0;(t|0)<(o|0);t=t+1|0){r[e+n|0]=0;n=n+1|0}}function h(){var e=0,t=0,n=0,r=0,h=0,v=0;t=i(o,o)|0;n=t+t|0;r=n+t|0;f(r,0);p(e);do{a(e,t);d(t,n);c(e,n,n);s(r,n,r);l(t,e);h=u(e)|0;v=(h|0)==0|0}while(!v)}return{skeletonize:h}}},function(e,t,n){var r=n(7);function o(){r.a.call(this),this._counters=[]}o.prototype=Object.create(r.a.prototype,{ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}}),o.prototype.constructor=o,o.prototype._decode=function(){var e,t,n,r,o,i=this,a=[];if(this._counters=i._fillCounters(),!(e=i._findStart()))return null;r=e.startCounter;do{if((n=i._toPattern(r))<0)return null;if((t=i._patternToChar(n))<0)return null;if(a.push(t),r+=8,a.length>1&&i._isStartEnd(n))break}while(r<i._counters.length);return a.length-2<i.MIN_ENCODED_CHARS||!i._isStartEnd(n)?null:i._verifyWhitespace(e.startCounter,r-8)&&i._validateResult(a,e.startCounter)?(r=r>i._counters.length?i._counters.length:r,o=e.start+i._sumCounters(e.startCounter,r-8),{code:a.join(""),start:e.start,end:o,startInfo:e,decodedCodes:a}):null},o.prototype._verifyWhitespace=function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)},o.prototype._calculatePatternLength=function(e){var t,n=0;for(t=e;t<e+7;t++)n+=this._counters[t];return n},o.prototype._thresholdResultPattern=function(e,t){var n,r,o,i,a,c=this,s={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},u=t;for(o=0;o<e.length;o++){for(a=c._charToPattern(e[o]),i=6;i>=0;i--)n=2==(1&i)?s.bar:s.space,(r=1==(1&a)?n.wide:n.narrow).size+=c._counters[u+i],r.counts++,a>>=1;u+=8}return["space","bar"].forEach(function(e){var t=s[e];t.wide.min=Math.floor((t.narrow.size/t.narrow.counts+t.wide.size/t.wide.counts)/2),t.narrow.max=Math.ceil(t.wide.min),t.wide.max=Math.ceil((t.wide.size*c.MAX_ACCEPTABLE+c.PADDING)/t.wide.counts)}),s},o.prototype._charToPattern=function(e){var t,n=e.charCodeAt(0);for(t=0;t<this.ALPHABET.length;t++)if(this.ALPHABET[t]===n)return this.CHARACTER_ENCODINGS[t];return 0},o.prototype._validateResult=function(e,t){var n,r,o,i,a,c,s=this._thresholdResultPattern(e,t),u=t;for(n=0;n<e.length;n++){for(c=this._charToPattern(e[n]),r=6;r>=0;r--){if(o=0==(1&r)?s.bar:s.space,i=1==(1&c)?o.wide:o.narrow,(a=this._counters[u+r])<i.min||a>i.max)return!1;c>>=1}u+=8}return!0},o.prototype._patternToChar=function(e){var t;for(t=0;t<this.CHARACTER_ENCODINGS.length;t++)if(this.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(this.ALPHABET[t]);return-1},o.prototype._computeAlternatingThreshold=function(e,t){var n,r,o=Number.MAX_VALUE,i=0;for(n=e;n<t;n+=2)(r=this._counters[n])>i&&(i=r),r<o&&(o=r);return(o+i)/2|0},o.prototype._toPattern=function(e){var t,n,r,o,i=e+7,a=64,c=0;if(i>this._counters.length)return-1;for(t=this._computeAlternatingThreshold(e,i),n=this._computeAlternatingThreshold(e+1,i),r=0;r<7;r++)o=0==(1&r)?t:n,this._counters[e+r]>o&&(c|=a),a>>=1;return c},o.prototype._isStartEnd=function(e){var t;for(t=0;t<this.START_END.length;t++)if(this.START_END[t]===e)return!0;return!1},o.prototype._sumCounters=function(e,t){var n,r=0;for(n=e;n<t;n++)r+=this._counters[n];return r},o.prototype._findStart=function(){var e,t,n=this,r=n._nextUnset(n._row);for(e=1;e<this._counters.length;e++)if(-1!==(t=n._toPattern(e))&&n._isStartEnd(t))return{start:r+=n._sumCounters(0,e),end:r+n._sumCounters(e,e+8),startCounter:e,endCounter:e+8}},t.a=o},function(e,t,n){var r=n(7);function o(){r.a.call(this)}function i(e,t,n){for(var r=n.length,o=0,i=0;r--;)i+=e[n[r]],o+=t[n[r]];return i/o}o.prototype=Object.create(r.a.prototype,{CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}}),o.prototype.constructor=o,o.prototype._decodeCode=function(e,t){var n,r,o,a=[0,0,0,0,0,0],c=this,s=e,u=!c._row[s],f=0,d={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}};for(n=s;n<c._row.length;n++)if(c._row[n]^u)a[f]++;else{if(f===a.length-1){for(t&&c._correct(a,t),r=0;r<c.CODE_PATTERN.length;r++)(o=c._matchPattern(a,c.CODE_PATTERN[r]))<d.error&&(d.code=r,d.error=o);return d.end=n,-1===d.code||d.error>c.AVG_CODE_ERROR?null:(c.CODE_PATTERN[d.code]&&(d.correction.bar=i(c.CODE_PATTERN[d.code],a,this.MODULE_INDICES.bar),d.correction.space=i(c.CODE_PATTERN[d.code],a,this.MODULE_INDICES.space)),d)}a[++f]=1,u=!u}return null},o.prototype._correct=function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)},o.prototype._findStart=function(){var e,t,n,r,o,a=[0,0,0,0,0,0],c=this,s=c._nextSet(c._row),u=!1,f=0,d={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}};for(e=s;e<c._row.length;e++)if(c._row[e]^u)a[f]++;else{if(f===a.length-1){for(o=0,r=0;r<a.length;r++)o+=a[r];for(t=c.START_CODE_A;t<=c.START_CODE_C;t++)(n=c._matchPattern(a,c.CODE_PATTERN[t]))<d.error&&(d.code=t,d.error=n);if(d.error<c.AVG_CODE_ERROR)return d.start=e-o,d.end=e,d.correction.bar=i(c.CODE_PATTERN[d.code],a,this.MODULE_INDICES.bar),d.correction.space=i(c.CODE_PATTERN[d.code],a,this.MODULE_INDICES.space),d;for(r=0;r<4;r++)a[r]=a[r+2];a[4]=0,a[5]=0,f--}else f++;a[f]=1,u=!u}return null},o.prototype._decode=function(){var e,t,n=this,r=n._findStart(),o=null,i=!1,a=[],c=0,s=0,u=[],f=[],d=!1,l=!0;if(null===r)return null;switch(o={code:r.code,start:r.start,end:r.end,correction:{bar:r.correction.bar,space:r.correction.space}},f.push(o),s=o.code,o.code){case n.START_CODE_A:e=n.CODE_A;break;case n.START_CODE_B:e=n.CODE_B;break;case n.START_CODE_C:e=n.CODE_C;break;default:return null}for(;!i;){if(t=d,d=!1,null!==(o=n._decodeCode(o.end,o.correction)))switch(o.code!==n.STOP_CODE&&(l=!0),o.code!==n.STOP_CODE&&(u.push(o.code),s+=++c*o.code),f.push(o),e){case n.CODE_A:if(o.code<64)a.push(String.fromCharCode(32+o.code));else if(o.code<96)a.push(String.fromCharCode(o.code-64));else switch(o.code!==n.STOP_CODE&&(l=!1),o.code){case n.CODE_SHIFT:d=!0,e=n.CODE_B;break;case n.CODE_B:e=n.CODE_B;break;case n.CODE_C:e=n.CODE_C;break;case n.STOP_CODE:i=!0}break;case n.CODE_B:if(o.code<96)a.push(String.fromCharCode(32+o.code));else switch(o.code!==n.STOP_CODE&&(l=!1),o.code){case n.CODE_SHIFT:d=!0,e=n.CODE_A;break;case n.CODE_A:e=n.CODE_A;break;case n.CODE_C:e=n.CODE_C;break;case n.STOP_CODE:i=!0}break;case n.CODE_C:if(o.code<100)a.push(o.code<10?"0"+o.code:o.code);else switch(o.code!==n.STOP_CODE&&(l=!1),o.code){case n.CODE_A:e=n.CODE_A;break;case n.CODE_B:e=n.CODE_B;break;case n.STOP_CODE:i=!0}}else i=!0;t&&(e=e===n.CODE_A?n.CODE_B:n.CODE_A)}return null===o?null:(o.end=n._nextUnset(n._row,o.end),n._verifyTrailingWhitespace(o)?(s-=c*u[u.length-1])%103!==u[u.length-1]?null:a.length?(l&&a.splice(a.length-1,1),{code:a.join(""),start:r.start,end:o.end,codeset:e,startInfo:r,decodedCodes:f,endInfo:o}):null:null)},r.a.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},t.a=o},function(e,t,n){var r=n(45);function o(){r.a.call(this)}var i=/[IOQ]/g,a=/[A-Z0-9]{17}/;o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o,o.prototype._decode=function(){var e=r.a.prototype._decode.apply(this);if(!e)return null;var t=e.code;return t?(t=t.replace(i,"")).match(a)?this._checkChecksum(t)?(e.code=t,e):null:(console.log("Failed AZ09 pattern code:",t),null):null},o.prototype._checkChecksum=function(e){return!!e},t.a=o},function(e,t,n){var r=n(4);function o(){r.a.call(this)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_2",writeable:!1}}),o.prototype.constructor=o,o.prototype.decode=function(e,t){this._row=e;var n,r=0,o=0,i=t,a=this._row.length,c=[],s=[];for(o=0;o<2&&i<a;o++){if(!(n=this._decodeCode(i)))return null;s.push(n),c.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<1-o),1!=o&&(i=this._nextSet(this._row,n.end),i=this._nextUnset(this._row,i))}return 2!=c.length||parseInt(c.join(""))%4!==r?null:{code:c.join(""),decodedCodes:s,end:n.end}},t.a=o},function(e,t,n){var r=n(4);function o(){r.a.call(this)}var i=[24,20,18,17,12,6,3,10,9,5];o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_5",writeable:!1}}),o.prototype.constructor=o,o.prototype.decode=function(e,t){this._row=e;var n,r=0,o=0,a=t,c=this._row.length,s=[],u=[];for(o=0;o<5&&a<c;o++){if(!(n=this._decodeCode(a)))return null;u.push(n),s.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<4-o),4!=o&&(a=this._nextSet(this._row,n.end),a=this._nextUnset(this._row,a))}return 5!=s.length?null:function(e){var t,n=e.length,r=0;for(t=n-2;t>=0;t-=2)r+=e[t];for(r*=3,t=n-1;t>=0;t-=2)r+=e[t];return(r*=3)%10}(s)!==function(e){var t;for(t=0;t<10;t++)if(e===i[t])return t;return null}(r)?null:{code:s.join(""),decodedCodes:u,end:n.end}},t.a=o},function(e,t,n){var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"ean_8",writeable:!1}}),o.prototype.constructor=o,o.prototype._decodePayload=function(e,t,n){var r,o=this;for(r=0;r<4;r++){if(!(e=o._decodeCode(e.end,o.CODE_G_START)))return null;t.push(e.code),n.push(e)}if(null===(e=o._findPattern(o.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<4;r++){if(!(e=o._decodeCode(e.end,o.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},t.a=o},function(e,t,n){var r=n(15),o=r&&r.__esModule?function(){return r.default}:function(){return r};Object.defineProperty(o,"a",{get:o});var i=n(7);function a(e){var t;e=o.a.bind()((t={},Object.keys(a.CONFIG_KEYS).forEach(function(e){t[e]=a.CONFIG_KEYS[e].default}),t),e),i.a.call(this,e),this.barSpaceRatio=[1,1],e.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}var c={START_PATTERN:{value:[1,1,1,1]},STOP_PATTERN:{value:[1,1,3]},CODE_PATTERN:{value:[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}};a.prototype=Object.create(i.a.prototype,c),a.prototype.constructor=a,a.prototype._matchPattern=function(e,t){if(this.config.normalizeBarSpaceWidth){var n,r=[0,0],o=[0,0],a=[0,0],c=this.MAX_CORRECTION_FACTOR,s=1/c;for(n=0;n<e.length;n++)r[n%2]+=e[n],o[n%2]+=t[n];for(a[0]=o[0]/r[0],a[1]=o[1]/r[1],a[0]=Math.max(Math.min(a[0],c),s),a[1]=Math.max(Math.min(a[1],c),s),this.barSpaceRatio=a,n=0;n<e.length;n++)e[n]*=this.barSpaceRatio[n%2]}return i.a.prototype._matchPattern.call(this,e,t)},a.prototype._findPattern=function(e,t,n,r){var o,i,a,c,s=[],u=this,f=0,d={error:Number.MAX_VALUE,code:-1,start:0,end:0},l=u.AVG_CODE_ERROR;for(n=n||!1,r=r||!1,t||(t=u._nextSet(u._row)),o=0;o<e.length;o++)s[o]=0;for(o=t;o<u._row.length;o++)if(u._row[o]^n)s[f]++;else{if(f===s.length-1){for(c=0,a=0;a<s.length;a++)c+=s[a];if((i=u._matchPattern(s,e))<l)return d.error=i,d.start=o-c,d.end=o,d;if(!r)return null;for(a=0;a<s.length-2;a++)s[a]=s[a+2];s[s.length-2]=0,s[s.length-1]=0,f--}else f++;s[f]=1,n=!n}return null},a.prototype._findStart=function(){for(var e,t,n=this,r=n._nextSet(n._row),o=1;!t;){if(!(t=n._findPattern(n.START_PATTERN,r,!1,!0)))return null;if(o=Math.floor((t.end-t.start)/4),(e=t.start-10*o)>=0&&n._matchRange(e,t.start,0))return t;r=t.end,t=null}},a.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},a.prototype._findEnd=function(){var e,t,n=this;return n._row.reverse(),e=n._findPattern(n.STOP_PATTERN),n._row.reverse(),null===e?null:(t=e.start,e.start=n._row.length-e.end,e.end=n._row.length-t,null!==e?n._verifyTrailingWhitespace(e):null)},a.prototype._decodePair=function(e){var t,n,r=[];for(t=0;t<e.length;t++){if(!(n=this._decodeCode(e[t])))return null;r.push(n)}return r},a.prototype._decodeCode=function(e){var t,n,r,o=this.AVG_CODE_ERROR,i={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t=0;t<e.length;t++)e[t];for(r=0;r<this.CODE_PATTERN.length;r++)(n=this._matchPattern(e,this.CODE_PATTERN[r]))<i.error&&(i.code=r,i.error=n);if(i.error<o)return i},a.prototype._decodePayload=function(e,t,n){for(var r,o,i=0,a=e.length,c=[[0,0,0,0,0],[0,0,0,0,0]];i<a;){for(r=0;r<5;r++)c[0][r]=e[i]*this.barSpaceRatio[0],c[1][r]=e[i+1]*this.barSpaceRatio[1],i+=2;if(!(o=this._decodePair(c)))return null;for(r=0;r<o.length;r++)t.push(o[r].code+""),n.push(o[r])}return o},a.prototype._verifyCounterLength=function(e){return e.length%10==0},a.prototype._decode=function(){var e,t,n,r=this,o=[],i=[];return(e=r._findStart())?(i.push(e),(t=r._findEnd())?(n=r._fillCounters(e.end,t.start,!1),r._verifyCounterLength(n)&&r._decodePayload(n,o,i)?o.length%2!=0||o.length<6?null:(i.push(t),{code:o.join(""),start:e.start,end:t.end,startInfo:e,decodedCodes:i}):null):null):null},a.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},t.a=a},function(e,t,n){var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}}),o.prototype.constructor=o,o.prototype._decodePayload=function(e,t,n){var r,o=0;for(r=0;r<6;r++){if(!(e=this._decodeCode(e.end)))return null;e.code>=this.CODE_G_START&&(e.code=e.code-this.CODE_G_START,o|=1<<5-r),t.push(e.code),n.push(e)}return this._determineParity(o,t)?e:null},o.prototype._determineParity=function(e,t){var n,r;for(r=0;r<this.CODE_FREQUENCY.length;r++)for(n=0;n<this.CODE_FREQUENCY[r].length;n++)if(e===this.CODE_FREQUENCY[r][n])return t.unshift(r),t.push(n),!0;return!1},o.prototype._convertToUPCA=function(e){var t=[e[0]],n=e[e.length-2];return(t=n<=2?t.concat(e.slice(1,3)).concat([n,0,0,0,0]).concat(e.slice(3,6)):3===n?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):4===n?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,n])).push(e[e.length-1]),t},o.prototype._checksum=function(e){return r.a.prototype._checksum.call(this,this._convertToUPCA(e))},o.prototype._findEnd=function(e,t){return!0,r.a.prototype._findEnd.call(this,e,!0)},o.prototype._verifyTrailingWhitespace=function(e){var t;if((t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0))return e},t.a=o},function(e,t,n){var r=n(4);function o(e,t){r.a.call(this,e,t)}o.prototype=Object.create(r.a.prototype,{FORMAT:{value:"upc_a",writeable:!1}}),o.prototype.constructor=o,o.prototype._decode=function(){var e=r.a.prototype._decode.call(this);return e&&e.code&&13===e.code.length&&"0"===e.code.charAt(0)?(e.code=e.code.substring(1),e):null},t.a=o},function(t,n,r){var o=r(15),i=o&&o.__esModule?function(){return o.default}:function(){return o};Object.defineProperty(i,"a",{get:i});var a=r(27),c=r(91),s=r(83),u=r(79),f=r(85),d=(r(6),r(42),r(43)),l=r(90),p=r(88),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v={clone:r(8)};n.a=function(){var t,n,r,o,g,m,y,b=!0,_={ctx:{image:null},dom:{image:null}},w=[],C=!0,E={},S=u.a.bind()();function T(e){r=e||new a.a({x:t.getWidth(),y:t.getHeight()}),console.log(r.size),o=[v.clone([0,0]),v.clone([0,r.size.y]),v.clone([r.size.x,r.size.y]),v.clone([r.size.x,0])],y=c.b.bind()(r,E.locator),g=s.a.create(E.decoder,r)}function x(e){var r;if("VideoStream"===E.inputStream.type)r=document.createElement("video"),t=l.a.createVideoStream(r);else if("ImageStream"===E.inputStream.type)t=l.a.createImageStream();else if("LiveStream"===E.inputStream.type){var o=R();o&&((r=o.querySelector("video"))||(r=document.createElement("video"),o.appendChild(r))),t=l.a.createLiveStream(r),f.a.request(r,E.inputStream.constraints).then(function(){t.trigger("canrecord")}).catch(function(t){return e(t)})}t.setAttribute("preload","auto"),t.setInputStream(E.inputStream),t.addEventListener("canrecord",function(e){c.a.bind()(t,E.locator),function(){if("undefined"!=typeof document){var e=R();_.dom.image=document.querySelector("canvas.imgBuffer"),_.dom.image||(_.dom.image=document.createElement("canvas"),_.dom.image.className="imgBuffer",e&&"ImageStream"===E.inputStream.type&&e.appendChild(_.dom.image)),_.ctx.image=_.dom.image.getContext("2d"),_.dom.image.width=t.getCanvasSize().x,_.dom.image.height=t.getCanvasSize().y}}(),n=p.a.create(t,_.dom.image),M(E.numOfWorkers,function(){var n;0===E.numOfWorkers&&T(),n=e,t.play(),n()})}.bind(void 0,e))}function R(){var e=E.inputStream.target;if(e&&e.nodeName&&1===e.nodeType)return e;var t="string"==typeof e?e:"#interactive.viewport";return document.querySelector(t)}function O(e,n){var r,o=e;e&&C&&(function e(n){var r,o=t.getTopRight(),i=o.x,a=o.y;if(0!==i||0!==a){if(n.barcodes)for(r=0;r<n.barcodes.length;r++)e(n.barcodes[r]);var c;if(n.line&&2===n.line.length&&((c=n.line)[0].x+=i,c[0].y+=a,c[1].x+=i,c[1].y+=a),n.box&&s(n.box),n.boxes&&n.boxes.length>0)for(r=0;r<n.boxes.length;r++)s(n.boxes[r])}function s(e){for(var t=e.length;t--;)e[t][0]+=i,e[t][1]+=a}}(e),function e(n,r){r&&m&&(n.barcodes?n.barcodes.filter(function(e){return e.codeResult}).forEach(function(t){return e(t,r)}):n.codeResult&&m.addResult(r,t.getCanvasSize(),n.codeResult))}(e,n),o=e.barcodes||e),S.publish("processed",o),(r=e)&&(r.barcodes?r.barcodes.some(function(e){return e.codeResult}):r.codeResult)&&S.publish("detected",o)}function P(){var e,t;(t=E.locate?y.locate():[[v.clone(o[0]),v.clone(o[1]),v.clone(o[2]),v.clone(o[3])]])?((e=(e=g.decodeFromBoundingBoxes(t))||{}).boxes=t,O(e,r.data)):O()}function D(){var e;if(C){if(w.length>0){if(!(e=w.filter(function(e){return!e.busy})[0]))return;n.attachData(e.imageData)}else n.attachData(r.data);n.grab()&&(e?(e.busy=!0,e.worker.postMessage({cmd:"process",imageData:e.imageData},[e.imageData.buffer])):P())}else P()}function A(){var e,t;C&&"LiveStream"===E.inputStream.type?(e=null,t=1e3/(0===E.frequency?60:E.frequency||60),b=!1,function n(r){e=e||r,b||(r>=e&&(e+=t,D()),window.requestAnimFrame(n))}(performance.now())):D()}function j(n){var r,o,i,a,c={worker:void 0,imageData:new Uint8Array(t.getWidth()*t.getHeight()),busy:!0};void 0!==e&&(a=e),i=new Blob(["("+function(e){if(e){var t=e().default;if(!t)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var n,r=t._worker.createScanner();function o(e){self.postMessage({event:"processed",imageData:n.data,result:e},[n.data.buffer])}function i(){self.postMessage({event:"initialized",imageData:n.data},[n.data.buffer])}self.onmessage=function(e){if("init"===e.data.cmd){var a=e.data.config;a.numOfWorkers=0,n=new t.ImageWrapper({x:e.data.size.x,y:e.data.size.y},new Uint8Array(e.data.imageData)),r.init(a,i,n),r.subscribe("processed",o)}else"process"===e.data.cmd&&(n.data=new Uint8Array(e.data.imageData),r.start())}}.toString()+")("+a+");"],{type:"text/javascript"}),r=window.URL.createObjectURL(i),c.worker=new Worker(r),c.worker.onmessage=function(e){if("initialized"===e.data.event)return URL.revokeObjectURL(r),c.busy=!1,c.imageData=new Uint8Array(e.data.imageData),console.log("Worker initialized"),n(c);"processed"===e.data.event?(c.imageData=new Uint8Array(e.data.imageData),c.busy=!1,O(e.data.result,c.imageData)):"error"===e.data.event&&console.log("Worker error: "+e.data.message)},c.worker.postMessage({cmd:"init",size:{x:t.getWidth(),y:t.getHeight()},imageData:c.imageData,config:(o=E,h({},o,{inputStream:h({},o.inputStream,{target:null})}))},[c.imageData.buffer])}function M(e,t){var n=e-w.length;if(0===n)return t&&t();if(n<0)return w.slice(n).forEach(function(e){e.worker.terminate(),console.log("Worker terminated!")}),w=w.slice(0,n),t&&t();for(var r=function(n){w.push(n),w.length>=e&&t&&t()},o=0;o<n;o++)j(r)}return{init:function(e,t,n){if(E=i.a.bind()({},d.a,e),n)return C=!1,T(n),t();x(t)},start:function(){A()},isRunning:function(){return!b},stop:function(){b=!0,M(0),"LiveStream"===E.inputStream.type&&f.a.release(),t.clearEventHandlers()},pause:function(){b=!0},subscribe:function(e,t){S.subscribe(e,t)},unsubscribe:function(e,t){S.unsubscribe(e,t)},registerResultCollector:function(e){e&&"function"==typeof e.addResult&&(m=e)},decodeSingle:function(e,t){var n=this;this.init(e,function(){S.once("processed",function(e){n.stop(),t.call(null,e)},!0),A()})},canvas:_}}},function(e,t,n){e.e=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},function(e,t,n){e.e=function(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}},function(e,t,n){e.e=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null}},function(e,t,n){e.e=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},function(e,t,n){e.e=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e}},function(e,t,n){e.e=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(e,t,n){var r=n(5)(n(3),"DataView");e.e=r},function(e,t,n){var r=n(160),o=n(161),i=n(162),a=n(163),c=n(164);function s(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.e=s},function(e,t,n){var r=n(5)(n(3),"Promise");e.e=r},function(e,t,n){var r=n(5)(n(3),"Set");e.e=r},function(e,t,n){var r=n(29),o=n(184),i=n(185);function a(e){var t=-1,n=e?e.length:0;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.e=a},function(e,t,n){var r=n(5)(n(3),"WeakMap");e.e=r},function(e,t,n){e.e=function(e,t){return e.set(t[0],t[1]),e}},function(e,t,n){e.e=function(e,t){return e.add(t),e}},function(e,t,n){e.e=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){e.e=function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t,n){e.e=function(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(32),o=n(14);e.e=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(18),o=n(48),i=n(52),a=n(121),c=n(142),s=n(61),u=n(149),f=n(154),d=n(35),l=n(165),p=n(166),h=n(167),v=n(0),g=n(71),m=n(22),y=n(2),b=n(14),_="[object Arguments]",w="[object Function]",C="[object GeneratorFunction]",E="[object Object]",S={};S[_]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S[E]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[w]=S["[object WeakMap]"]=!1,e.e=function e(t,n,T,x,R,O,P){var D;if(x&&(D=O?x(t,R,O,P):x(t)),void 0!==D)return D;if(!y(t))return t;var A=v(t);if(A){if(D=l(t),!n)return s(t,D)}else{var j=d(t),M=j==w||j==C;if(g(t))return c(t,n);if(j==E||j==_||M&&!O){if(m(t))return O?t:{};if(D=h(M?{}:t),!n)return u(t,a(D,t))}else{if(!S[j])return O?t:{};D=p(t,j,e,n)}}P||(P=new r);var I=P.get(t);if(I)return I;if(P.set(t,D),!A)var k=T?f(t):b(t);return o(k||t,function(r,o){k&&(r=t[o=r]),i(D,o,e(r,n,T,x,o,t,P))}),D}},function(e,t,n){var r=n(2),o=Object.create;e.e=function(e){return r(e)?o(e):{}}},function(e,t,n){var r=n(30),o=n(168);e.e=function e(t,n,i,a,c){var s=-1,u=t.length;for(i||(i=o),c||(c=[]);++s<u;){var f=t[s];n>0&&i(f)?n>1?e(f,n-1,i,a,c):r(c,f):a||(c[c.length]=f)}return c}},function(e,t,n){var r=Object.prototype.toString;e.e=function(e){return r.call(e)}},function(e,t,n){e.e=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(18),o=n(62),i=n(152),a=n(153),c=n(35),s=n(0),u=n(22),f=n(41),d=2,l="[object Arguments]",p="[object Array]",h="[object Object]",v=Object.prototype.hasOwnProperty;e.e=function(e,t,n,g,m,y){var b=s(e),_=s(t),w=p,C=p;b||(w=(w=c(e))==l?h:w),_||(C=(C=c(t))==l?h:C);var E=w==h&&!u(e),S=C==h&&!u(t),T=w==C;if(T&&!E)return y||(y=new r),b||f(e)?o(e,t,n,g,m,y):i(e,t,w,n,g,m,y);if(!(m&d)){var x=E&&v.call(e,"__wrapped__"),R=S&&v.call(t,"__wrapped__");if(x||R){var O=x?e.value():e,P=R?t.value():t;return y||(y=new r),n(O,P,g,m,y)}}return!!T&&(y||(y=new r),a(e,t,n,g,m,y))}},function(e,t,n){var r=n(18),o=n(55),i=1,a=2;e.e=function(e,t,n,c){var s=n.length,u=s,f=!c;if(null==e)return!u;for(e=Object(e);s--;){var d=n[s];if(f&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<u;){var l=(d=n[s])[0],p=e[l],h=d[1];if(f&&d[2]){if(void 0===p&&!(l in e))return!1}else{var v=new r;if(c)var g=c(p,h,l,e,t,v);if(!(void 0===g?o(h,p,c,i|a,v):g))return!1}}return!0}},function(e,t,n){var r=n(38),o=n(22),i=n(171),a=n(2),c=n(69),s=/^\[object .+?Constructor\]$/,u=Function.prototype,f=Object.prototype,d=u.toString,l=f.hasOwnProperty,p=RegExp("^"+d.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.e=function(e){return!(!a(e)||i(e))&&(r(e)||o(e)?p:s).test(c(e))}},function(e,t,n){var r=n(39),o=n(13),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var a=Object.prototype.toString;e.e=function(e){return o(e)&&r(e.length)&&!!i[a.call(e)]}},function(e,t,n){var r=n(24),o=n(67),i=Object.prototype.hasOwnProperty;e.e=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(128),o=n(156),i=n(66);e.e=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(55),o=n(192),i=n(193),a=n(23),c=n(64),s=n(66),u=n(9),f=1,d=2;e.e=function(e,t){return a(e)&&c(t)?s(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,void 0,f|d)}}},function(e,t,n){var r=n(18),o=n(48),i=n(51),a=n(57),c=n(135),s=n(0),u=n(2),f=n(41);e.e=function e(t,n,d,l,p){if(t!==n){if(!s(n)&&!f(n))var h=a(n);o(h||n,function(o,a){if(h&&(o=n[a=o]),u(o))p||(p=new r),c(t,n,a,d,e,l,p);else{var s=l?l(t[a],o,a+"",t,n,p):void 0;void 0===s&&(s=o),i(t,a,s)}})}}},function(e,t,n){var r=n(51),o=n(122),i=n(61),a=n(11),c=n(0),s=n(70),u=n(38),f=n(2),d=n(196),l=n(41),p=n(203);e.e=function(e,t,n,h,v,g,m){var y=e[n],b=t[n],_=m.get(b);if(_)r(e,n,_);else{var w=g?g(y,b,n+"",e,t,m):void 0,C=void 0===w;C&&(w=b,c(b)||l(b)?c(y)?w=y:s(y)?w=i(y):(C=!1,w=o(b,!0)):d(b)||a(b)?a(y)?w=p(y):!f(y)||h&&u(y)?(C=!1,w=o(b,!0)):w=y:C=!1),C&&(m.set(b,w),v(w,b,h,g,m),m.delete(b)),r(e,n,w)}}},function(e,t,n){var r=n(58);e.e=function(e,t){return e=Object(e),r(e,t,function(t,n){return n in e})}},function(e,t,n){e.e=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(53);e.e=function(e){return function(t){return r(t,e)}}},function(e,t,n){e.e=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(19),o=n(40),i=1/0,a=r?r.prototype:void 0,c=a?a.toString:void 0;e.e=function(e){if("string"==typeof e)return e;if(o(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,n){e.e=function(e){return function(t){return e(t)}}},function(e,t,n){e.e=function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}},function(e,t,n){var r=n(31);e.e=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t,n){var r=n(116),o=n(50),i=n(65);e.e=function(e,t,n){var a=t?n(i(e),!0):i(e);return o(a,r,new e.constructor)}},function(e,t,n){var r=/\w*$/;e.e=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(117),o=n(50),i=n(68);e.e=function(e,t,n){var a=t?n(i(e),!0):i(e);return o(a,r,new e.constructor)}},function(e,t,n){var r=n(19),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.e=function(e){return i?Object(i.call(e)):{}}},function(e,t,n){var r=n(31);e.e=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(32),o=n(34);e.e=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(3)["__core-js_shared__"];e.e=r},function(e,t,n){var r=n(59),o=n(169);e.e=function(e){return r(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,c&&o(n[0],n[1],c)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}},function(e,t,n){var r=n(19),o=n(47),i=n(10),a=n(62),c=n(65),s=n(68),u=1,f=2,d="[object Boolean]",l="[object Date]",p="[object Error]",h="[object Map]",v="[object Number]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",C=r?r.prototype:void 0,E=C?C.valueOf:void 0;e.e=function(e,t,n,r,C,S,T){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!r(new o(e),new o(t)));case d:case l:case v:return i(+e,+t);case p:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var x=c;case m:var R=S&f;if(x||(x=s),e.size!=t.size&&!R)return!1;var O=T.get(e);if(O)return O==t;S|=u,T.set(e,t);var P=a(x(e),x(t),r,C,S,T);return T.delete(e),P;case b:if(E)return E.call(e)==E.call(t)}return!1}},function(e,t,n){var r=n(14),o=2,i=Object.prototype.hasOwnProperty;e.e=function(e,t,n,a,c,s){var u=c&o,f=r(e),d=f.length;if(d!=r(t).length&&!u)return!1;for(var l=d;l--;){var p=f[l];if(!(u?p in t:i.call(t,p)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var v=!0;s.set(e,t),s.set(t,e);for(var g=u;++l<d;){var m=e[p=f[l]],y=t[p];if(a)var b=u?a(y,m,p,t,e,s):a(m,y,p,e,t,s);if(!(void 0===b?m===y||n(m,y,a,c,s):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(v=!1)}return s.delete(e),s.delete(t),v}},function(e,t,n){var r=n(54),o=n(34),i=n(14);e.e=function(e){return r(e,i,o)}},function(e,t,n){var r=n(54),o=n(157),i=n(72);e.e=function(e){return r(e,i,o)}},function(e,t,n){var r=n(64),o=n(14);e.e=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},function(e,t,n){var r=n(30),o=n(33),i=n(34),a=n(74),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.e=c},function(e,t,n){e.e=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(60),o=n(11),i=n(0),a=n(36),c=n(23),s=n(39),u=n(9);e.e=function(e,t,n){for(var f,d=-1,l=(t=c(t,e)?[t]:r(t)).length;++d<l;){var p=u(t[d]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||!!(l=e?e.length:0)&&s(l)&&a(p,l)&&(i(e)||o(e))}},function(e,t,n){var r=n(25);e.e=function(){this.__data__=r?r(null):{}}},function(e,t,n){e.e=function(e){return this.has(e)&&delete this.__data__[e]}},function(e,t,n){var r=n(25),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.e=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(25),o=Object.prototype.hasOwnProperty;e.e=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(25),o="__lodash_hash_undefined__";e.e=function(e,t){return this.__data__[e]=r&&void 0===t?o:t,this}},function(e,t,n){var r=Object.prototype.hasOwnProperty;e.e=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,n){var r=n(31),o=n(143),i=n(144),a=n(145),c=n(146),s=n(147),u=n(148),f="[object Boolean]",d="[object Date]",l="[object Map]",p="[object Number]",h="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",x="[object Uint8ClampedArray]",R="[object Uint16Array]",O="[object Uint32Array]";e.e=function(e,t,n,P){var D=e.constructor;switch(t){case y:return r(e);case f:case d:return new D(+e);case b:return o(e,P);case _:case w:case C:case E:case S:case T:case x:case R:case O:return u(e,P);case l:return i(e,P,n);case p:case g:return new D(e);case h:return a(e);case v:return c(e,P,n);case m:return s(e)}}},function(e,t,n){var r=n(123),o=n(33),i=n(24);e.e=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},function(e,t,n){var r=n(19),o=n(11),i=n(0),a=r?r.isConcatSpreadable:void 0;e.e=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(10),o=n(12),i=n(36),a=n(2);e.e=function(e,t,n){if(!a(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&i(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){e.e=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r,o=n(150),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.e=function(e){return!!i&&i in e}},function(e,t,n){e.e=function(){this.__data__=[]}},function(e,t,n){var r=n(20),o=Array.prototype.splice;e.e=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),0))}},function(e,t,n){var r=n(20);e.e=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(20);e.e=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(20);e.e=function(e,t){var n=this.__data__,o=r(n,e);return o<0?n.push([e,t]):n[o][1]=t,this}},function(e,t,n){var r=n(111),o=n(17),i=n(28);e.e=function(){this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){var r=n(21);e.e=function(e){return r(this,e).delete(e)}},function(e,t,n){var r=n(21);e.e=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(21);e.e=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(21);e.e=function(e,t){return r(this,e).set(e,t),this}},function(e,t,n){e.e=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(63),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,c=function(){try{return a&&a.binding("util")}catch(e){}}();e.e=c}).call(t,n(75)(e))},function(e,t,n){var r="__lodash_hash_undefined__";e.e=function(e){return this.__data__.set(e,r),this}},function(e,t,n){e.e=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(17);e.e=function(){this.__data__=new r}},function(e,t,n){e.e=function(e){return this.__data__.delete(e)}},function(e,t,n){e.e=function(e){return this.__data__.get(e)}},function(e,t,n){e.e=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(17),o=n(28),i=n(29),a=200;e.e=function(e,t){var n=this.__data__;if(n instanceof r){var c=n.__data__;if(!o||c.length<a-1)return c.push([e,t]),this;n=this.__data__=new i(c)}return n.set(e,t),this}},function(e,t,n){var r=n(197),o=n(204),i=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,s=r(function(e){e=o(e);var t=[];return i.test(e)&&t.push(""),e.replace(a,function(e,n,r,o){t.push(r?o.replace(c,"$1"):n||e)}),t});e.e=s},function(e,t,n){var r=n(53);e.e=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},function(e,t,n){var r=n(126),o=n(159);e.e=function(e,t){return null!=e&&o(e,t,r)}},function(e,t,n){e.e=function(e){return e}},function(e,t,n){var r=n(35),o=n(11),i=n(0),a=n(12),c=n(71),s=n(24),u=n(67),f="[object Map]",d="[object Set]",l=Object.prototype,p=l.hasOwnProperty,h=!l.propertyIsEnumerable.call({valueOf:1},"valueOf");e.e=function(e){if(a(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||o(e)))return!e.length;var t=r(e);if(t==f||t==d)return!e.size;if(h||s(e))return!u(e).length;for(var n in e)if(p.call(e,n))return!1;return!0}},function(e,t,n){var r=n(33),o=n(22),i=n(13),a="[object Object]",c=Function.prototype,s=Object.prototype,u=c.toString,f=s.hasOwnProperty,d=u.call(Object),l=s.toString;e.e=function(e){if(!i(e)||l.call(e)!=a||o(e))return!1;var t=r(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}},function(e,t,n){var r=n(29),o="Expected a function";function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.e=i},function(e,t,n){var r="Expected a function";e.e=function(e){if("function"!=typeof e)throw new TypeError(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},function(e,t,n){var r=n(56),o=n(198),i=n(200);e.e=function(e,t){return i(e,o(r(t)))}},function(e,t,n){var r=n(56),o=n(58),i=n(155);e.e=function(e,t){return null==e?{}:o(e,i(e),r(t))}},function(e,t,n){var r=n(137),o=n(138),i=n(23),a=n(9);e.e=function(e){return i(e)?r(a(e)):o(e)}},function(e,t,n){e.e=function(){return!1}},function(e,t,n){var r=n(32),o=n(72);e.e=function(e){return r(e,o(e))}},function(e,t,n){var r=n(140);e.e=function(e){return null==e?"":r(e)}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getDtlsParameters=function(e,t){var n=r.splitLines(e),o=(n=n.concat(r.splitLines(t))).filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:o.split(" ")[0],value:o.split(" ")[1]}]}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),o=3;o<n.length;o++){var i=n[o],a=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var c=r.parseRtpMap(a),s=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(c.parameters=s.length?r.parseFmtp(s[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},r.parseRtpEncodingParameters=function(e){var t,n=[],o=r.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),c=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=c.length>0&&c[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===s&&(t=u[0][1]),o.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};n.push(r),i&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&s&&n.push({ssrc:s});var f=r.matchPrefix(e,"b=");return f.length&&(0===f[0].indexOf("b=TIAS:")?f=parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")&&(f=parseInt(f[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=f})),n},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return t?r.getDirection(t):"sendrecv"},e.e=r},function(e,t,n){"use strict";!function(){var t=n(1).log,r=n(1).browserDetails;e.e.browserDetails=r,e.e.extractVersion=n(1).extractVersion,e.e.disableLog=n(1).disableLog;var o=n(207)||null,i=n(209)||null,a=n(211)||null,c=n(213)||null;switch(r.browser){case"opera":case"chrome":if(!o||!o.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.e.browserShim=o,o.shimGetUserMedia(),o.shimMediaStream(),o.shimSourceObject(),o.shimPeerConnection(),o.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.e.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!i||!i.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.e.browserShim=i,i.shimGetUserMedia(),i.shimPeerConnection();break;case"safari":if(!c)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.e.browserShim=c,c.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},function(e,t,n){"use strict";var r=n(1).log,o=n(1).browserDetails,i={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):this.src=""}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),o=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return o(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},c=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){return o.apply(this,[function(e){i[1](c(a(e)))},arguments[0]])}return new Promise(function(t,n){1===i.length&&"object"==typeof e?o.apply(r,[function(e){t(c(a(e)))},n]):o.apply(r,[function(e){t(c(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,o){t.apply(e,[r,o,n])})}return t.apply(this,arguments)}}),o.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,o){t.apply(n,[e[0],r,o])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};e.e={shimMediaStream:i.shimMediaStream,shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(208)}},function(e,t,n){"use strict";var r=n(1).log;e.e=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var i={};"number"==typeof r.ideal?(i[o("min",n)]=r.ideal,t.optional.push(i),(i={})[o("max",n)]=r.ideal,t.optional.push(i)):(i[o("",n)]=r.ideal,t.optional.push(i))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if((t=JSON.parse(JSON.stringify(t)))&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var o=t.video.facingMode;if((o=o&&("object"==typeof o?o:{ideal:o}))&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===o.exact||"environment"===o.ideal))return navigator.mediaDevices.enumerateDevices().then(function(i){var a=(i=i.filter(function(e){return"videoinput"===e.kind})).find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||i.length&&i[i.length-1];return a&&(t.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(e,r,o){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){o(n(e))})})};var o=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var i=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return i(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,n){"use strict";var r=n(205),o=n(1).browserDetails,i={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&o.version>=14393})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(!n.candidate||0===Object.keys(n.candidate).length)for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");else-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),n.candidate||"complete"===e.iceGatheringState)||e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var o=t.codecs[r];if(e.name.toLowerCase()===o.name.toLowerCase()&&e.clockRate===o.clockRate&&e.numChannels===o.numChannels){n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,o=new RTCIceGatherer(n.iceOptions),i=new RTCIceTransport(o);o.onlocalcandidate=function(a){var c=new Event("icecandidate");c.candidate={sdpMid:e,sdpMLineIndex:t};var s=a.candidate,u=!s||0===Object.keys(s).length;u?(void 0===o.state&&(o.state="completed"),c.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(s.component="RTCP"===i.component?2:1,c.candidate.candidate=r.writeCandidate(s));var f=r.splitSections(n.localDescription.sdp);-1===c.candidate.candidate.indexOf("typ endOfCandidates")?f[c.candidate.sdpMLineIndex+1]+="a="+c.candidate.candidate+"\r\n":f[c.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=f.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(c),u&&d&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(c),null!==n.onicecandidate&&n.onicecandidate(c),d&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},i.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(i);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:o,iceTransport:i,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var o=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),n&&e.rtpReceiver&&(o.encodings=e.recvEncodingParameters,o.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,o=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);o._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(o.remoteDescription.sdp),n=t.shift();var i=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=o.transceivers[t],c=a.iceGatherer,s=a.iceTransport,u=a.dtlsTransport,f=a.localCapabilities,d=a.remoteCapabilities;if(!("0"===e.split("\n",1)[0].split(" ",2)[1])){var l=r.getIceParameters(e,n);if(i){var p=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});p.length&&s.setRemoteCandidates(p)}var h=r.getDtlsParameters(e,n);i&&(h.role="server"),o.usingBundle&&0!==t||(s.start(c,l,i?"controlling":"controlled"),u.start(h));var v=o._getCommonCapabilities(f,d);o._transceive(a,v.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var c=arguments[1];window.setTimeout(function(){c(),"new"===o.iceGatheringState&&(o.iceGatheringState="gathering"),o._emitBufferedCandidates()},0)}var s=Promise.resolve();return s.then(function(){a||("new"===o.iceGatheringState&&(o.iceGatheringState="gathering"),window.setTimeout(o._emitBufferedCandidates.bind(o),500))}),s},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,o=[],i=r.splitSections(e.sdp),a=i.shift(),c=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,i.forEach(function(i,s){var u,f,d,l,p,h,v,g,m,y,b,_,w=r.splitLines(i)[0].substr(2).split(" "),C=w[0],E="0"===w[1],S=r.getDirection(i,a),T=r.parseRtpParameters(i);E||(b=r.getIceParameters(i,a),(_=r.getDtlsParameters(i,a)).role="client"),g=r.parseRtpEncodingParameters(i);var x,R=r.matchPrefix(i,"a=mid:");R=R.length?R[0].substr(6):r.generateIdentifier();var O=r.matchPrefix(i,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];O&&(x=O.value);var P=r.matchPrefix(i,"a=end-of-candidates",a).length>0,D=r.matchPrefix(i,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||E)"answer"!==e.type||E||(f=(u=t.transceivers[s]).iceGatherer,d=u.iceTransport,l=u.dtlsTransport,p=u.rtpSender,h=u.rtpReceiver,v=u.sendEncodingParameters,m=u.localCapabilities,t.transceivers[s].recvEncodingParameters=g,t.transceivers[s].remoteCapabilities=T,t.transceivers[s].cname=x,(c||P)&&D.length&&d.setRemoteCandidates(D),t.usingBundle&&0!==s||(d.start(f,b,"controlling"),l.start(_)),t._transceive(u,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!h||"sendrecv"!==S&&"sendonly"!==S?delete u.rtpReceiver:(y=h.track,o.push([y,h]),n.addTrack(y)));else{var A,j=t.usingBundle&&s>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(R,s);if(P&&j.iceTransport.setRemoteCandidates(D),m=RTCRtpReceiver.getCapabilities(C),v=[{ssrc:1001*(2*s+2)}],y=(h=new RTCRtpReceiver(j.dtlsTransport,C)).track,o.push([y,h]),n.addTrack(y),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=s)"audio"===C?A=t.localStreams[0].getAudioTracks()[0]:"video"===C&&(A=t.localStreams[0].getVideoTracks()[0]),A&&(p=new RTCRtpSender(A,j.dtlsTransport));t.transceivers[s]={iceGatherer:j.iceGatherer,iceTransport:j.iceTransport,dtlsTransport:j.dtlsTransport,localCapabilities:m,remoteCapabilities:T,rtpSender:p,rtpReceiver:h,kind:C,mid:R,cname:x,sendEncodingParameters:v,recvEncodingParameters:g},t._transceive(t.transceivers[s],!1,"sendrecv"===S||"sendonly"===S)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),o.forEach(function(r){var o=r[0],i=r[1],a=new Event("track");a.track=o,a.receiver=i,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0||t.checking>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":(t.connected>0||t.completed>0)&&(e="connected"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this.dispatchEvent(n),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(n)}},window.RTCPeerConnection.prototype.createOffer=function(){var e,t=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var n=[],o=0,i=0;if(this.localStreams.length&&(o=this.localStreams[0].getAudioTracks().length,i=this.localStreams[0].getVideoTracks().length),e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(o=e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(i=e.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?o>0:i>0}),"audio"===e.kind?o--:"video"===e.kind&&i--});o>0||i>0;)o>0&&(n.push({kind:"audio",wantReceive:!0}),o--),i>0&&(n.push({kind:"video",wantReceive:!0}),i--);var a=r.writeSessionBoilerplate(),c=[];n.forEach(function(e,n){var o,i,a=e.track,s=e.kind,u=r.generateIdentifier(),f=t.usingBundle&&n>0?{iceGatherer:c[0].iceGatherer,iceTransport:c[0].iceTransport,dtlsTransport:c[0].dtlsTransport}:t._createIceAndDtlsTransports(u,n),d=RTCRtpSender.getCapabilities(s),l=[{ssrc:1001*(2*n+1)}];a&&(o=new RTCRtpSender(a,f.dtlsTransport)),e.wantReceive&&(i=new RTCRtpReceiver(f.dtlsTransport,s)),c[n]={iceGatherer:f.iceGatherer,iceTransport:f.iceTransport,dtlsTransport:f.dtlsTransport,localCapabilities:d,remoteCapabilities:null,rtpSender:o,rtpReceiver:i,kind:s,mid:u,sendEncodingParameters:l,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+c.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(e,n){var o=c[n];a+=r.writeMediaSection(o,o.localCapabilities,"offer",t.localStreams[0])}),this._pendingOffer=c;var s=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,s),Promise.resolve(s)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){var o=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,o,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var o=this.transceivers[t];if(o){var i=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===i.protocol&&(0===i.port||9===i.port))return;if("1"!==i.component)return;"endOfCandidates"===i.type&&(i={}),o.iceTransport.addRemoteCandidate(i);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(i.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};e.e={shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(210)}},function(e,t,n){"use strict";e.e=function(){var e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(t=e).name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}});var t})}}},function(e,t,n){"use strict";var r=n(1).browserDetails,o={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],o=0;o<e.iceServers.length;o++){var i=e.iceServers[o];if(i.hasOwnProperty("urls"))for(var a=0;a<i.urls.length;a++){var c={url:i.urls[a]};0===i.urls[a].indexOf("turn")&&(c.username=i.username,c.credential=i.credential),n.push(c)}else n.push(e.iceServers[o])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,n,r){return t.apply(this,[e||null]).then(function(e){return t=e,n=new Map,Object.keys(t).forEach(function(e){n.set(e,t[e]),n[e]=t[e]}),n;var t,n}).then(n,r)}}}};e.e={shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(212)}},function(e,t,n){"use strict";var r=n(1).log,o=n(1).browserDetails;e.e=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,i){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),o.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){i(e(t))})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:function(e){return new Promise(function(n,r){t(e,n,r)})},addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var n=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var i=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return i(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){if(o.version<44)return t(e,n,r);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(e).then(n,r)}}},function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.e={shimGetUserMedia:r.shimGetUserMedia}},function(e,t,n){e.e=n(76)}])});